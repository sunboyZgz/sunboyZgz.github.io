<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>rust-move-borrow</title>
    <link href="/2022/10/16/rust-move-borrow/"/>
    <url>/2022/10/16/rust-move-borrow/</url>
    
    <content type="html"><![CDATA[<h1 id="ä¸€é¢˜çœ‹æ‰€æœ‰æƒé—®é¢˜"><a href="#ä¸€é¢˜çœ‹æ‰€æœ‰æƒé—®é¢˜" class="headerlink" title="ä¸€é¢˜çœ‹æ‰€æœ‰æƒé—®é¢˜"></a>ä¸€é¢˜çœ‹æ‰€æœ‰æƒé—®é¢˜</h1><h2 id="å†™æ–‡åŸå› "><a href="#å†™æ–‡åŸå› " class="headerlink" title="å†™æ–‡åŸå› "></a>å†™æ–‡åŸå› </h2><p>ä¼—æ‰€å‘¨çŸ¥ï¼Œåœ¨rustä¸­æ‰€æœ‰æƒé—®é¢˜æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„é—®é¢˜ï¼Œä»–ç›´æ¥å½±å“äº†ä¸€ä¸ªç¨‹åºçš„æ€§èƒ½ã€‚å¦å¤–é…åˆä¸Šrustçš„æ£€æŸ¥å™¨+rustçš„ç”Ÿå‘½å‘¨æœŸï¼Œä»–èƒ½åœ¨å¾ˆå¤šæƒ…å†µä¸‹åŠæ—¶åé¦ˆå‡ºç¨‹åºçš„æ½œåœ¨é—®é¢˜ï¼Œè¿™ç¯‡æ–‡ç« å°†ä¼šç”¨ä¸€ä¸ªleetcodeé¢˜ç›®åˆ†æä¸€ä¸‹å¦‚ä½•åœ¨ç¼–å†™ç¨‹åºçš„æ—¶å€™è¿›è¡Œåˆç†çš„æ€è€ƒã€‚  </p><p><a href="https://leetcode.cn/problems/merge-two-sorted-lists">https://leetcode.cn/problems/merge-two-sorted-lists</a></p><p><strong>ã€æ³¨ã€‘ï¼š</strong>æœ¬æ–‡å¹¶ä¸æ˜¯ç®—çš„è®²è§£ï¼Œæœ€å¥½åœ¨èƒ½å¤Ÿæ€è€ƒå‡ºç®—æ³•çš„å®ç°æ–¹æ¡ˆä¸‹é˜…è¯»ã€‚</p><h2 id="moveä¸borrow"><a href="#moveä¸borrow" class="headerlink" title="moveä¸borrow"></a>moveä¸borrow</h2><p>å…³äºå˜é‡è¡¨è¾¾å¼çš„é—®é¢˜ï¼š<a href="https://doc.rust-lang.org/reference/expressions.html?highlight=move#place-expressions-and-value-expressions">https://doc.rust-lang.org/reference/expressions.html?highlight=move#place-expressions-and-value-expressions</a></p><p><strong>å…³äºè¿™é¡µç›¸å…³ç†è®ºï¼Œä¸‹é¢è¿™å¥è¯å°¤ä¸ºéœ€è¦æ³¨æ„ï¼Œè¿™å¥è¯åœ¨å¾ªç¯ä¸­èƒ½èµ·åˆ°éå¸¸å¤§çš„ä½œç”¨ã€‚</strong></p><blockquote><p>After moving out of a place expression that evaluates to a local variable, the location is deinitialized and cannot be read from again until it is reinitialized</p></blockquote><p>å…³äºæ‰€æœ‰æƒçš„ç†è®ºåœ¨è¿™ä¸ªé“¾æ¥ä¸­æœ‰è¯¦ç»†çš„è¯´æ˜ï¼š<a href="https://doc.rust-lang.org/book/ch04-00-understanding-ownership.html">https://doc.rust-lang.org/book/ch04-00-understanding-ownership.html</a></p><p>ä¸‹é¢æˆ‘ä»¬ç®€å•çš„è®²ä¸€ä¸‹ï¼Œæ¥ä¸‹æ¥éœ€è¦çš„ç†è®º</p><h4 id="1-æ‰€æœ‰æƒ"><a href="#1-æ‰€æœ‰æƒ" class="headerlink" title="1.æ‰€æœ‰æƒ"></a>1.æ‰€æœ‰æƒ</h4><p>å¯¹äºä¸€ä¸ªä¸´æ—¶ä¸”ä¸æ˜¯referenceçš„å˜é‡æˆ‘ä»¬å¯ä»¥è®¤ä¸ºæˆ‘ä»¬æ‹¥æœ‰äº†å®ƒçš„æ‰€æœ‰æƒï¼Œæ­¤æ—¶å¯¹äºæˆ‘ä»¬å£°æ˜çš„å˜é‡æˆ‘ä»¬å¯ä»¥è®¤ä¸ºæˆ‘ä»¬æ‹¥æœ‰äº†å®ƒçš„æ‰€æœ‰æƒï¼Œå˜é‡å†…å­˜åœ°å€ä½ç½®å°±ä¼šå¼€è¾Ÿå‡ºè£…è½½è¯¥å˜é‡æ‰€éœ€è¦çš„å†…å­˜ç©ºé—´ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">let</span> <span class="hljs-variable">node</span> = ListNode::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-number">1</span>);<br></code></pre></td></tr></table></figure><h4 id="2-å¯å˜æ€§"><a href="#2-å¯å˜æ€§" class="headerlink" title="2.å¯å˜æ€§"></a>2.å¯å˜æ€§</h4><p>é»˜è®¤æƒ…å†µä¸‹rustè§†ä¸ºæˆ‘ä»¬ä¸èƒ½å¯¹å˜é‡çš„å†…å­˜ç©ºé—´è¿›è¡Œæ“ä½œï¼Œå³ä½¿æ‹¥æœ‰æ‰€æœ‰æƒä¾æ—§éœ€è¦<code>mut</code>patternæ¥æä¾›å¯æ“ä½œè¯¥åŒºåŸŸå†…å­˜ç©ºé—´çš„èƒ½åŠ›ã€‚å³ä½¿ä½ æ˜¯æˆ¿å­çš„ä¸»äººï¼Œä¹Ÿéœ€è¦å…ˆç”¨é’¥åŒ™æ‰“å¼€æˆ¿å­çš„é—¨ã€‚å—¯ï¼æ²¡é”™ï¼Œå°±æ˜¯è¿™ç§æ„Ÿè§‰ã€‚</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">node</span> = ListNode::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-number">1</span>);<br>node.next = <span class="hljs-title function_ invoke__">Some</span>(<span class="hljs-type">Box</span>::<span class="hljs-title function_ invoke__">new</span>(ListNode::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-number">2</span>)));<br><span class="hljs-comment">//ä¸‹é¢æ˜¯æ²¡æœ‰mutç¼–è¯‘å™¨çš„æŠ¥é”™</span><br><span class="hljs-comment">//cannot assign to `node.next`, as `node` is not declared as mutable cannot assign</span><br></code></pre></td></tr></table></figure><h4 id="3-ä¸å¯å˜å€Ÿç”¨"><a href="#3-ä¸å¯å˜å€Ÿç”¨" class="headerlink" title="3.ä¸å¯å˜å€Ÿç”¨"></a>3.ä¸å¯å˜å€Ÿç”¨</h4><p>å€Ÿç”¨è¿™ä¸ªæ¦‚å¿µçœŸçš„éå¸¸è´´è¿‘æˆ‘ä»¬æ—¥å¸¸çš„è¡¨è¿°äº†ï¼Œå°±æ˜¯ä¸œè¥¿æˆ‘å€Ÿç»™ä½ äº†ï¼Œä½†æ˜¯ä½ è¦åŸæ¨¡åŸæ ·å¾—è¿˜ç»™æˆ‘ã€‚</p><p>åœ¨ä»£ç ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºå°†æ•°æ®å†…å­˜ç©ºé—´çš„è¯»å–èƒ½åŠ›åˆ†å‘ç»™äº†å…¶ä»–å˜é‡ã€‚</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">let</span> <span class="hljs-variable">node</span> = ListNode::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-number">1</span>);<br><span class="hljs-keyword">let</span> <span class="hljs-variable">node2</span> = &amp;node;<br></code></pre></td></tr></table></figure><h4 id="4-å¯å˜å€Ÿç”¨"><a href="#4-å¯å˜å€Ÿç”¨" class="headerlink" title="4.å¯å˜å€Ÿç”¨"></a>4.å¯å˜å€Ÿç”¨</h4><p>ä¸ä¸å¯å˜å€Ÿç”¨ç›¸ä¼¼ï¼Œæä¾›äº†å¯ä¿®æ”¹åŸæœ‰æ•°æ®å†…å­˜ç©ºé—´çš„èƒ½åŠ›ã€‚ä¸œè¥¿ä»ç„¶åœ¨æˆ‘è¿™é‡Œï¼Œä½†æ˜¯ä½ ä¿®æ”¹ä¹‹åï¼Œæˆ‘ä¹Ÿè¿™è¾¹ä¹Ÿäº§ç”Ÿäº†å˜åŒ–ã€‚</p><p>ä½†æ˜¯åœ¨è¿™ç§å€Ÿç”¨å‰ï¼Œè¿™ä¸ªä¸œè¥¿é¦–å…ˆæ˜¯èƒ½å¤Ÿä¿®æ”¹çš„ï¼Œä¹Ÿå°±æ˜¯ç»‘å®šäº†<code>mut</code> patternã€‚å¦å¤–å¯å˜å€Ÿç”¨çš„æ“ä½œç¬¦å·æ˜¯<code>&amp;mut</code>ã€‚</p><p>è¿™ç¯‡å®˜æ–‡ä¹Ÿè¯´æ˜äº†ä½¿ç”¨å¯å˜å€Ÿç”¨çš„å…¶ä»–æ€§è´¨ï¼š<a href="https://doc.rust-lang.org/book/ch04-02-references-and-borrowing.html#mutable-references">https://doc.rust-lang.org/book/ch04-02-references-and-borrowing.html#mutable-references</a></p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">node</span> = ListNode::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-number">1</span>);<br><span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, &amp;node.val);<br><span class="hljs-keyword">let</span> <span class="hljs-variable">node2</span> = &amp;<span class="hljs-keyword">mut</span> node;<br>node2.val = <span class="hljs-number">2</span>;<br><span class="hljs-title function_ invoke__">println</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, node.val);<br></code></pre></td></tr></table></figure><h2 id="å…·ä½“è¿‡ç¨‹"><a href="#å…·ä½“è¿‡ç¨‹" class="headerlink" title="å…·ä½“è¿‡ç¨‹"></a>å…·ä½“è¿‡ç¨‹</h2><p>ä¼˜ç§€çš„ä»£ç åœ¨äº§å‡ºå‰ä¸€å®šæœ‰å¾ˆå¤šçš„æ€è€ƒï¼Œä½†æ˜¯åœ¨äº§å‡ºä¹‹å‰rustä¼šè®©ä½ å¢åŠ å¯¹äºä»£ç ç»“æ„ç¼–ç»‡çš„æ€è€ƒï¼Œä¸ç„¶ä½ å°±å¯èƒ½åªèƒ½å°†ä¼ªä»£ç ä¿å­˜åœ¨ä½ çš„è„‘å­é‡Œäº†ã€‚å¯¹äºæˆ‘ä»¬è¿™æ ·çš„æ–°æ‰‹å¦‚æœä¸è®¤çœŸæ€è€ƒçš„è¯å°±ä¸æ˜¯é¡¹ç›®è§„æ¨¡åŒ–åçš„é—®é¢˜äº†ï¼Œè€Œæ˜¯èƒ½ä¸èƒ½è®©ç¼–è¯‘å™¨çˆ¸çˆ¸æ”¾ä½ è¿‡å…³ğŸ˜‚ã€‚</p><h4 id="ç®—æ³•ç®€æï¼šå¯¹äºä¸¤æ¡é“¾åˆå¹¶æƒ…å†µçš„åˆ†æ"><a href="#ç®—æ³•ç®€æï¼šå¯¹äºä¸¤æ¡é“¾åˆå¹¶æƒ…å†µçš„åˆ†æ" class="headerlink" title="ç®—æ³•ç®€æï¼šå¯¹äºä¸¤æ¡é“¾åˆå¹¶æƒ…å†µçš„åˆ†æ"></a>ç®—æ³•ç®€æï¼šå¯¹äºä¸¤æ¡é“¾åˆå¹¶æƒ…å†µçš„åˆ†æ</h4><ol><li>ä¸¤æ¡ç©ºé“¾</li><li>åªæœ‰ä¸€æ¡ é“¾&#x2F;å­é“¾ å­˜åœ¨</li><li>ä¸¤æ¡ é“¾&#x2F;å­é“¾ éƒ½å­˜åœ¨</li></ol><h4 id="å°†æ€è·¯å…·ä½“åŒ–"><a href="#å°†æ€è·¯å…·ä½“åŒ–" class="headerlink" title="å°†æ€è·¯å…·ä½“åŒ–"></a>å°†æ€è·¯å…·ä½“åŒ–</h4><p>1.åˆ›å»ºé˜²æ­¢ç¬¬ä¸€ä¸ªèŠ‚ç‚¹å°±æ˜¯NULLè€Œæ— æ³•æ­£ç¡®æ‰§è¡Œç®—æ³•çš„è¾…åŠ©èŠ‚ç‚¹</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">head</span> = ListNode::<span class="hljs-title function_ invoke__">new</span>(-<span class="hljs-number">101</span>);<br><span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">cur</span> = &amp;<span class="hljs-keyword">mut</span> head; <span class="hljs-comment">//curå˜é‡çš„å†…å­˜åœ°å€ä¸­åº”è¯¥è¦è®°å½•å½“å‰è¿æ¥åˆ°çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¦å¤–æœ€åä¸€ä¸ªç‚¹å°±æ˜¯curè®°å½•çš„æ˜¯ä¸€ä¸ªåœ°å€ï¼Œä½†æ˜¯æˆ‘ä»¬åœ¨æ‹¼æ¥æ—¶éœ€è¦ä¿®æ”¹è¿™ä¸ªåœ°å€ï¼Œè€Œä¸å•å•æ˜¯ä¿®æ”¹åœ°å€æ‰€æŒ‡çš„æ•°æ®ç©ºé—´ã€‚</span><br>...<br>head.next<br></code></pre></td></tr></table></figure><p>2.åœ¨ä¸¤æ¡å­é“¾éƒ½å­˜åœ¨çš„æƒ…å†µä¸‹è¿›è¡Œçš„æ‹¼æ¥æ“ä½œ</p><p>While let expression:<a href="https://doc.rust-lang.org/reference/expressions/loop-expr.html#predicate-pattern-loops">https://doc.rust-lang.org/reference/expressions/loop-expr.html#predicate-pattern-loops</a></p><p>Match expression: <a href="https://doc.rust-lang.org/reference/expressions/match-expr.html">https://doc.rust-lang.org/reference/expressions/match-expr.html</a></p><blockquote><p>If the scrutinee expression is a <a href="https://doc.rust-lang.org/reference/expressions.html#place-expressions-and-value-expressions">value expression</a>, it is first evaluated into a temporary location, and the resulting value is sequentially compared to the patterns in the arms until a match is found.</p></blockquote><p>é’ˆå¯¹è¿™ä¸ªé—®é¢˜æˆ‘ä»¬å¯ä»¥åšå‡ºä»¥ä¸‹ä¸¤ç§æ€è€ƒ</p><p>æ€è€ƒä¸€ï¼š</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">while</span> <span class="hljs-keyword">let</span> (<span class="hljs-title function_ invoke__">Some</span>(n1), <span class="hljs-title function_ invoke__">Some</span>(n2)) = (&amp;list1, &amp;list2) &#123;<span class="hljs-comment">//åœ¨è¿™é‡Œä½¿ç”¨å€Ÿç”¨ï¼Œè¿™æ ·ä¸ä¼šå¯¼è‡´listçš„æ‰€æœ‰æƒè½¬ç§»åˆ°è¿™é‡Œï¼Œç„¶ååé¢å°±ä¼šæ— æ³•è®¿é—®list1ï¼Œlist2</span><br>&#125;<br></code></pre></td></tr></table></figure><p>æ€è€ƒäºŒï¼š</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">while</span> <span class="hljs-keyword">let</span> (<span class="hljs-title function_ invoke__">Some</span>(n1), <span class="hljs-title function_ invoke__">Some</span>(n2)) = (list1, list2) &#123;<span class="hljs-comment">//è¿™å°±æ˜¯è½¬ç§»æ‰€æœ‰æƒå¹¶ä½¿ç”¨tuple patternè¿›è¡Œç»“æ„èµ‹å€¼ï¼Œè¿™æ ·n1ï¼Œn2æ‰€æœ‰æƒä¹Ÿåœ¨å½“å‰ä½œç”¨åŸŸä¸‹ã€‚ä½†æ˜¯ä½¿ç”¨è¿™ç§æ–¹æ¡ˆæˆ‘ä»¬éœ€è¦è¿›è¡Œä¸€ç‚¹ä¿®æ”¹ï¼Œå› ä¸ºè¿™æ ·çš„æ‰€æœ‰æƒè§£æ„ä¼šé€ æˆlist1ï¼Œlist2æ— æ³•åœ¨åç»­è®¿é—®</span><br>&#125;<br></code></pre></td></tr></table></figure><p>3.å–å°çš„èŠ‚ç‚¹è¿›è¡Œæ‹¼æ¥</p><p>æ€è€ƒä¸€çš„body</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">while</span> <span class="hljs-keyword">let</span> (<span class="hljs-title function_ invoke__">Some</span>(n1), <span class="hljs-title function_ invoke__">Some</span>(n2)) = (&amp;list1, &amp;list2) &#123;<span class="hljs-comment">//list1åœ¨æœªé‡åˆ†é…å‰ä¼šé£˜çº¢</span><br><span class="hljs-keyword">if</span> n1.val &lt; n2.val &#123;<br>      cur.next = list1; <span class="hljs-comment">//1.è¿™é‡Œmoveè¿›å»ï¼Œå½“æˆ‘ä»¬å†™åˆ°è¿™é‡Œåœ¨IDEç¯å¢ƒæˆ‘ä»¬ä¼šå‘ç° &amp;list1 è¿™é‡Œå‡ºç° borrow after moveçš„é£˜çº¢æŠ¥é”™ï¼Œè¿™æ—¶è¯·ç”¨å¥½ä¸Šé¢è¯´åˆ°çš„ é‡åˆ†é…ç†è®ºï¼Œè¯·è‡ªä¿¡ä½¿ç”¨ä¸ºlist1åˆ†é…ä¸€ä¸ªæ‰€æœ‰æƒçš„valueçš„ä»£ç </span><br>      cur = cur.next.<span class="hljs-title function_ invoke__">as_mut</span>().<span class="hljs-title function_ invoke__">unwrap</span>();  <span class="hljs-comment">//å› ä¸ºcuræ˜¯ä¸€ä¸ªå¯å˜å€Ÿç”¨ï¼Œæ‰€ä»¥éœ€è¦ä¸€ä¸ªå¯å˜å€Ÿç”¨</span><br>      list1 = cur.next.<span class="hljs-title function_ invoke__">take</span>(); <span class="hljs-comment">//2.ä»cur.nextè¿™é‡Œmoveå‡ºæ¥ï¼Œå¹¶æœªlist1é‡åˆ†é…</span><br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>      <span class="hljs-comment">//ç›¸åŒé“ç†</span><br>  &#125;<br>&#125;<br>cur.next = <span class="hljs-keyword">if</span> list1.<span class="hljs-title function_ invoke__">is_some</span>() &#123; list1 &#125; <span class="hljs-keyword">else</span> &#123; list2 &#125;;<br></code></pre></td></tr></table></figure><p>æ€è€ƒäºŒçš„body</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">loop</span> &#123;<br>    <span class="hljs-keyword">if</span> list1.<span class="hljs-title function_ invoke__">is_some</span>() &amp;&amp; list2.<span class="hljs-title function_ invoke__">is_some</span>() &#123;<span class="hljs-comment">//è¿™ä¹ˆåšæ˜¯ä¸ºäº†é˜²æ­¢while letæœ€åä¸€æ¬¡è§£æ„å¼•èµ·åç»­list1ï¼Œlist2æ— æ³•borrowçš„é—®é¢˜</span><br>        <span class="hljs-keyword">let</span> (n1, n2) = (list1.<span class="hljs-title function_ invoke__">unwrap</span>(), list2.<span class="hljs-title function_ invoke__">unwrap</span>());<br>        <span class="hljs-keyword">if</span> &amp;n1.val &lt; &amp;n2.val &#123;<br>            cur.next = <span class="hljs-title function_ invoke__">Some</span>(n1);<br>            cur = cur.next.<span class="hljs-title function_ invoke__">as_mut</span>().<span class="hljs-title function_ invoke__">unwrap</span>();<br>            list1 = cur.next.<span class="hljs-title function_ invoke__">take</span>();<br>            list2 = <span class="hljs-title function_ invoke__">Some</span>(n2)<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-comment">//ç›¸åŒé“ç†</span><br>        &#125;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">break</span>;<br>    &#125;<br>&#125;<br>cur.next = <span class="hljs-keyword">if</span> list1.<span class="hljs-title function_ invoke__">is_some</span>() &#123; list1 &#125; <span class="hljs-keyword">else</span> &#123; list2 &#125;;<br></code></pre></td></tr></table></figure><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>åœ¨rustä»£ç çš„ç¼–å†™ä¸­æˆ‘ä»¬éœ€è¦æ›´å¤šåœ°å»æ€è€ƒï¼Œè€Œä¸æ˜¯è¿‡åº¦ä¾èµ–äºç¼–è¯‘å™¨ï¼Œè¦åšåˆ°æœ‰ç†æœ‰æ®ã€‚è¿‡åº¦ä¾èµ–ç¼–è¯‘å™¨å¾ˆå®¹æ˜“ä¸è‡ªä¿¡å•¦ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>rust</category>
      
    </categories>
    
    
    <tags>
      
      <tag>newbie</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æµ®ç‚¹æ•°æ€»ç»“</title>
    <link href="/2022/10/12/float-numeric/"/>
    <url>/2022/10/12/float-numeric/</url>
    
    <content type="html"><![CDATA[<h1 id="æµ®ç‚¹æ•°ä¸å…¶æ„æˆ"><a href="#æµ®ç‚¹æ•°ä¸å…¶æ„æˆ" class="headerlink" title="æµ®ç‚¹æ•°ä¸å…¶æ„æˆ"></a>æµ®ç‚¹æ•°ä¸å…¶æ„æˆ</h1><h2 id="ä¸ºä»€ä¹ˆå­¦ä¹ æµ®ç‚¹æ•°ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆå­¦ä¹ æµ®ç‚¹æ•°ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆå­¦ä¹ æµ®ç‚¹æ•°ï¼Ÿ"></a>ä¸ºä»€ä¹ˆå­¦ä¹ æµ®ç‚¹æ•°ï¼Ÿ</h2><p>å¯¹äºæµ®ç‚¹æ•°ï¼Œæˆ‘ä¸€ç›´éƒ½æ˜¯æŠ±ç€æ·±å…¥å…¶åŸºç¡€å®ç°çš„æƒ³æ³•ï¼Œä½†æ˜¯ä¹‹å‰ä¸€ç›´æ²¡æœ‰è¿›è¡Œåº•å±‚çŸ¥è¯†çš„å­¦ä¹ ã€‚ç»ˆäºåœ¨è¿™å‡ å‘¨ï¼Œæˆ‘å¼€å§‹æ¶è¡¥åº•å±‚çš„çŸ¥è¯†ï¼Œè™½ç„¶å¯¹äºå¤§éƒ¨åˆ†äººæ¥è¯´æµ®ç‚¹æ•°ä»¥åŠå¯¹äºæµ®ç‚¹æ•°çš„æ“ä½œéƒ½ä¸éœ€è¦çŸ¥é“å…¶å†…éƒ¨çš„å®ç°ï¼Œä¸è¿‡æˆ‘è®¤ä¸ºæˆ‘ä»¬å¯ä»¥ä¸ç”¨å»å®ç°ï¼Œä½†æ˜¯ä½œä¸ºçŸ¥è¯†é¢æˆ‘ä»¬è‡³å°‘è¿˜æ˜¯è¦äº†è§£ä¸€äºŒçš„ã€‚</p><p>æ¯”å¦‚åœ¨ç¨‹åºè¯­è¨€ä¸­ç»å¸¸å¯ä»¥çœ‹åˆ°çš„é—®é¢˜ï¼š0.1 + 0.2 !&#x3D; 0.3 é—®é¢˜ã€‚</p><p>å½“ç„¶ä¸Šé¢è¿™ä¸ªé—®é¢˜å½’æ ¹åˆ°åº•ä¸»è¦æ˜¯å°æ•°åœ¨äºŒè¿›åˆ¶ä¸­çš„è®¡ç®—æ–¹æ¡ˆé‡‡ç”¨ä¸€ç§ä¹˜2å–1çš„æ–¹æ³•</p><h2 id="æµ®ç‚¹æ•°çš„åŸºæœ¬æ ¼å¼"><a href="#æµ®ç‚¹æ•°çš„åŸºæœ¬æ ¼å¼" class="headerlink" title="æµ®ç‚¹æ•°çš„åŸºæœ¬æ ¼å¼"></a>æµ®ç‚¹æ•°çš„åŸºæœ¬æ ¼å¼</h2><p>æˆ‘ä»¬çŸ¥é“è®¡ç®—æœºåº•å±‚å¯¹äºæ•°çš„è¡¨ç¤ºéƒ½æ˜¯ <code>0101xxxx...</code> è¿™æ ·çš„äºŒè¿›åˆ¶ç ï¼Œåœ¨æ•´æ•°çš„äºŒè¿›åˆ¶ä¸­æˆ‘ä»¬å°†æœ‰ç¬¦å·æ•°çš„å­˜å‚¨å•å…ƒ(è¿™é‡Œæ‰€è¯´çš„å­˜å‚¨å•å…ƒä¸int32 &#x3D; 4 byteså¯¹åº”)æœ€é«˜ä½ç½®è®¾ä¸ºç¬¦å·ä½ï¼Œ1è¡¨ç¤ºæ•´ä¸ªæ•°ä¸ºè´Ÿæ•°ã€‚</p><h4 id="åè¿›åˆ¶å¦‚ä½•è¿›è¡Œæµ®ç‚¹æ•°è¡¨ç¤º"><a href="#åè¿›åˆ¶å¦‚ä½•è¿›è¡Œæµ®ç‚¹æ•°è¡¨ç¤º" class="headerlink" title="åè¿›åˆ¶å¦‚ä½•è¿›è¡Œæµ®ç‚¹æ•°è¡¨ç¤º"></a>åè¿›åˆ¶å¦‚ä½•è¿›è¡Œæµ®ç‚¹æ•°è¡¨ç¤º</h4><p>ä¾‹å¦‚ï¼š</p><ul><li>0.000001 &#x3D; 1.0 * 10^-6</li><li>30000 &#x3D; 3.0 * 10^4</li></ul><h4 id="äºŒè¿›åˆ¶æµ®ç‚¹æ•°è¡¨ç¤º"><a href="#äºŒè¿›åˆ¶æµ®ç‚¹æ•°è¡¨ç¤º" class="headerlink" title="äºŒè¿›åˆ¶æµ®ç‚¹æ•°è¡¨ç¤º"></a>äºŒè¿›åˆ¶æµ®ç‚¹æ•°è¡¨ç¤º</h4><p>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¯¹è¿™ç§è®¤è¯†è¿›è¡ŒäºŒè¿›åˆ¶ç¿»è¯‘</p><p>1.0 * 10^6 &#x3D; 1 * binary(10^-6)</p><p>3.0 * 10^4 &#x3D; 11 * binary(10^4)</p><h4 id="å­˜å‚¨åœ¨è®¡ç®—æœºé‡Œçš„äºŒè¿›åˆ¶æµ®ç‚¹æ•°è¡¨ç¤º"><a href="#å­˜å‚¨åœ¨è®¡ç®—æœºé‡Œçš„äºŒè¿›åˆ¶æµ®ç‚¹æ•°è¡¨ç¤º" class="headerlink" title="å­˜å‚¨åœ¨è®¡ç®—æœºé‡Œçš„äºŒè¿›åˆ¶æµ®ç‚¹æ•°è¡¨ç¤º"></a>å­˜å‚¨åœ¨è®¡ç®—æœºé‡Œçš„äºŒè¿›åˆ¶æµ®ç‚¹æ•°è¡¨ç¤º</h4><p>ä½†æ˜¯æˆ‘ä»¬ä¸èƒ½å°†ä¸€ä¸ªè¡¨è¾¾å¼ç›´æ¥å­˜å‚¨åœ¨è®¡ç®—æœºä¸­ï¼Œè™½ç„¶æˆ‘è®¤ä¸ºæ˜¯æœ‰åŠæ³•å¯ä»¥åšåˆ°ï¼Œä½†æ˜¯è¿™å¹¶ä¸åˆ’ç®—ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€å¥—æ€§ä»·æ¯”æ›´é«˜çš„æ–¹æ¡ˆã€‚</p><p>äºæ˜¯ä¹æˆ‘ä»¬å°±éœ€è¦å»åˆ¶å®šä¸€å¥—å­˜å‚¨æ ¼å¼ï¼Œå»è§„å®šæµ®ç‚¹æ•°çš„æ­£è´Ÿï¼ŒæŒ‡æ•°æ¬¡æ•°ï¼Œä»¥åŠå®é™…æœ‰æ•ˆçš„æ•°ã€‚</p><p>å¦å¤–æˆ‘ä»¬ä¹Ÿå¯ä»¥å‘ç°å¯¹äº30000è¿™æ ·çš„æ•°å­—æˆ‘ä»¬ä¹Ÿå¯ä»¥è¡¨ç¤ºä¸º30 * 10^3 &#x3D;&#x3D; 3 * 10^4,è€Œæˆ‘ä»¬ç§°ç­‰å·å³è¾¹æ˜¯å¯¹ç­‰å·å·¦è¾¹çš„è§„æ ¼åŒ–ï¼ŒåŒç†äºŒè¿›åˆ¶ä¹Ÿå¯ä»¥åšè¿™æ ·çš„è§„æ ¼åŒ–ï¼Œå› ä¸ºäºŒè¿›åˆ¶åªæœ‰0å’Œ1ï¼Œæ‰€ä»¥æˆ‘ä»¬åªä¼šåœ¨å·¦è¾¹æ•°ä¸º1çš„æ—¶å€™è¿›è¡Œä¸€æ¬¡ç§»ä½ï¼Œè¿™æ ·æˆ‘ä»¬çœä¸‹è¿™ä¸€ä½çš„ç©ºé—´äº†ï¼Œä¸ºæµ®ç‚¹æ•°æä¾›æ›´å¤§çš„è¡¨è¾¾èŒƒå›´ã€‚</p><p>æµ®ç‚¹æ•°çš„ä¸‰éƒ¨åˆ†ï¼š<code>ç¬¦å·ä½</code>ï¼Œ<code>æŒ‡æ•°æ®µ</code>ï¼Œ<code>å°¾æ•°æ®µ</code>ã€‚å€¼å¾—ä¸€æçš„æ˜¯ï¼Œæµ®ç‚¹æ•°çš„ç¬¦å·ä½è¿™ç§è¡¨ç¤ºä¸æ•´æ•°ç¬¦å·ä½çš„è®¾è®¡æ€ç»´å¹¶ä¸ä¸€æ ·ã€‚</p><figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs isbl">æµ®ç‚¹æ•° = (-<span class="hljs-number">1</span>)^<span class="hljs-variable">S</span> * <span class="hljs-function"><span class="hljs-title">fraction</span>(å°¾æ•°) * <span class="hljs-number">2</span>^<span class="hljs-title">exponent</span>(æŒ‡æ•°)</span><br></code></pre></td></tr></table></figure><p>ä»¥ä¸‹æ˜¯ IEEE754æ ‡å‡†çš„f32</p><table><thead><tr><th>31</th><th>30</th><th>29</th><th>28</th><th>27</th><th>26</th><th>25</th><th>24</th><th>23</th><th>22</th><th>21</th><th>20</th><th>19</th><th>18</th><th>17</th><th>16</th><th>15</th><th>14</th><th>13</th><th>12</th></tr></thead><tbody><tr><td>ç¬¦å·ä½</td><td>exponent</td><td></td><td></td><td></td><td></td><td></td><td></td><td>exponent</td><td>fraction</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr></tbody></table><table><thead><tr><th>11</th><th>10</th><th>9</th><th>8</th><th>7</th><th>6</th><th>5</th><th>4</th><th>3</th><th>2</th><th>1</th><th>0</th></tr></thead><tbody><tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>fraction</td></tr></tbody></table><h2 id="å…·ä½“çš„è®¡ç®—"><a href="#å…·ä½“çš„è®¡ç®—" class="headerlink" title="å…·ä½“çš„è®¡ç®—"></a>å…·ä½“çš„è®¡ç®—</h2><p>1.å¦‚æœ0ï¼Œ32ä½å­˜å‚¨å…¨ä¸º0</p><p>2.å¦‚æœä¸ä¸ºé›¶ï¼Œè¿›è¡Œä¸Šè¿°çš„è®¡ç®—æ–¹æ¡ˆï¼Œè´Ÿæ•°åœ¨ç¬¦å·ä½ç½®1ï¼Œè¿›è¡ŒäºŒè¿›åˆ¶çš„è®¡ç®—å°†æ€ç»´ä¸­çš„åè¿›åˆ¶æµ®ç‚¹æ•°è½¬æ¢ä¸ºäºŒè¿›åˆ¶ã€‚</p><p>è®¡ç®—æœºåº•å±‚å¦‚ä½•å¤„ç†æˆ‘ä¸æ¸…æ¥šï¼Œè¿™é‡Œæˆ‘æ ¹æ®æµ®ç‚¹æ•°çš„ç®—æ•°å¤„ç†ç•™ä¸‹ä»¥ä¸‹ç»“è®ºï¼š</p><ul><li>å¦‚æœå­˜åœ¨æ•´æ•°ä½ï¼Œexponent &#x3D; æ•´æ•°ä½çš„ä½æ•° - 1, fraction æ‰”æ‰æœ€é«˜ä½çš„1</li><li>å¦‚æœä¸å­˜åœ¨æ•´æ•°ä½ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾åˆ°å°æ•°ä½äºŒè¿›åˆ¶çš„ç¬¬ä¸€ä¸ª1ï¼Œ1å‰é¢çš„0 ä»¥ exponent &#x3D; 0çš„æ•°é‡ æ¥è¡¨ç¤º</li></ul><h2 id="åé¦ˆ"><a href="#åé¦ˆ" class="headerlink" title="åé¦ˆ"></a>åé¦ˆ</h2><p>ä¸ºäº†æ›´ç®€å•çš„å¾—åˆ°åé¦ˆï¼šæˆ‘ä½¿ç”¨äº†æµè§ˆå™¨ä¸ºè½½ä½“ï¼Œä¸‹é¢æ˜¯æˆ‘çš„ä»£ç ä»“åº“</p><p><a href="https://github.com/sunboyZgz/interesting/blob/main/src/components/009.vue">https://github.com/sunboyZgz/interesting/blob/main/src/components/009.vue</a></p>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåº•å±‚çŸ¥è¯†</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è®¡ç®—æœºç»„æˆåŸç†</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>awesome-rust-1(IdentifierPattern)</title>
    <link href="/2022/09/23/awesome-rust-1/"/>
    <url>/2022/09/23/awesome-rust-1/</url>
    
    <content type="html"><![CDATA[<h1 id="Rust-IdentifierPattern-ref"><a href="#Rust-IdentifierPattern-ref" class="headerlink" title="Rust IdentifierPattern - ref"></a>Rust <em>IdentifierPattern</em> - ref</h1><h2 id="rust-å¯åŠ¨ï¼"><a href="#rust-å¯åŠ¨ï¼" class="headerlink" title="rust å¯åŠ¨ï¼"></a>rust å¯åŠ¨ï¼</h2><p>è¿™æ˜¯awesome-rustçš„ç¬¬ä¸€ç¯‡æ–‡ç« ï¼Œæ‰€æœ‰æ–‡ç« çš„å†…å®¹éƒ½å°†ä»¥é—®é¢˜ç”±æ¥+é—®é¢˜è§£å†³+å®˜æ–‡é“¾æ¥çš„æ–¹æ¡ˆæ¥è§£é‡Šï¼ˆå½“ç„¶ç”±äºä¸ªäººèƒ½åŠ›é—®é¢˜å®˜æ–‡ä¸­çš„å†…å®¹å¯èƒ½ä¸èƒ½ç†è§£åˆ°ä½ï¼Œè¯·æµ·æ¶µï¼‰ã€‚</p><p>rustçš„å®˜æ–¹referenceï¼š<a href="https://doc.rust-lang.org/reference/introduction.html">https://doc.rust-lang.org/reference/introduction.html</a> ã€‚æˆ‘è®¤ä¸ºæ‰€æœ‰å­¦ä¹ rustçš„åŒå­¦éƒ½åº”è¯¥çŸ¥é“è¿™ä»½å‚è€ƒæ‰‹å†Œçš„å­˜åœ¨ï¼Œè¿™ä»½æ‰‹å†ŒçœŸçš„æ˜¯å¤ªæ£’è¾£ã€‚</p><h2 id="IdentifierPattern"><a href="#IdentifierPattern" class="headerlink" title="IdentifierPattern"></a><em>IdentifierPattern</em></h2><h4 id="é—®é¢˜äº§å‡º"><a href="#é—®é¢˜äº§å‡º" class="headerlink" title="é—®é¢˜äº§å‡º"></a>é—®é¢˜äº§å‡º</h4><p>æˆ‘åœ¨<code>codewars</code>å¹³å°è¿›è¡Œç»ƒä¹ é¢˜ç›® [ <a href="https://www.codewars.com/kata/52bef5e3588c56132c0003bc">https://www.codewars.com/kata/52bef5e3588c56132c0003bc</a> ] åä¸ä»–äººä»£ç å¯¹æ¯”åå‘ç°äº† <code>ref</code> æ­£ç¡®ä½¿ç”¨çš„å§¿åŠ¿ä¹‹ä¸€ã€‚</p><p>è¿™é‡Œå€¼å¾—æä¸€å˜´çš„æ˜¯ï¼Œå¯¹äºåˆšæ­¥å…¥ä¸€é—¨æ–°è¯­è¨€çš„â€œèŒæ–°â€ï¼Œ<code>codewars</code>çš„é¢˜ç›®æ¨èéå¸¸é€‚åˆç”¨äºç†Ÿæ‚‰è¯­è¨€ç‰¹ç‚¹ä¸è¯­è¨€æ ‡å‡†åº“ã€‚</p><p>ä¸‹é¢è¿™ä¸ªæ˜¯Nodeçš„structï¼ŒåŒæ—¶Nodeå¹¶æ²¡æœ‰å®ç°<code>Clone</code>æˆ–è€…<code>Copy</code>ã€‚</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Node</span> &#123;<br>    value: <span class="hljs-type">u32</span>,<br>    left: <span class="hljs-type">Option</span>&lt;<span class="hljs-type">Box</span>&lt;Node&gt;&gt;,<br>    right: <span class="hljs-type">Option</span>&lt;<span class="hljs-type">Box</span>&lt;Node&gt;&gt;,<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ä»£ç å¯¹æ¯”"><a href="#ä»£ç å¯¹æ¯”" class="headerlink" title="ä»£ç å¯¹æ¯”"></a>ä»£ç å¯¹æ¯”</h4><p><strong>æˆ‘çš„ä»£ç </strong></p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">traverse</span>(last_nodes: &amp;<span class="hljs-keyword">mut</span> VecDeque&lt;&amp;Node&gt;, result: &amp;<span class="hljs-keyword">mut</span> <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">u32</span>&gt;) &#123;<br>    <span class="hljs-keyword">if</span> last_nodes.<span class="hljs-title function_ invoke__">len</span>() == <span class="hljs-number">0</span> &#123;<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">childrens</span> = VecDeque::<span class="hljs-title function_ invoke__">new</span>();<br>    <span class="hljs-keyword">while</span> <span class="hljs-keyword">let</span> <span class="hljs-variable">Some</span>(node) = last_nodes.<span class="hljs-title function_ invoke__">pop_front</span>() &#123;<br>      result.<span class="hljs-title function_ invoke__">push</span>(node.value);<br>      <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-variable">Some</span>(n) = &amp;node.left &#123;<br>          childrens.<span class="hljs-title function_ invoke__">push_back</span>(n.<span class="hljs-title function_ invoke__">as_ref</span>());<br>      &#125;<br>      <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-variable">Some</span>(n) = &amp;node.right &#123;<br>          childrens.<span class="hljs-title function_ invoke__">push_back</span>(n.<span class="hljs-title function_ invoke__">as_ref</span>());<br>      &#125;<br>    &#125;<br>    <span class="hljs-title function_ invoke__">traverse</span>(&amp;<span class="hljs-keyword">mut</span> childrens, result)<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>å…¶ä»–äººçš„ä»£ç </strong></p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">tree_by_levels_best</span>(root: &amp;Node) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">u32</span>&gt; &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">result</span> = <span class="hljs-built_in">vec!</span>[];<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">queue</span>: VecDeque&lt;&amp;Node&gt; = VecDeque::<span class="hljs-title function_ invoke__">from</span>([root]);<br>    <span class="hljs-keyword">while</span> <span class="hljs-keyword">let</span> <span class="hljs-variable">Some</span>(n) = queue.<span class="hljs-title function_ invoke__">pop_front</span>() &#123;<br>        result.<span class="hljs-title function_ invoke__">push</span>(n.value);<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-variable">Some</span>(<span class="hljs-keyword">ref</span> l) = n.left &#123; <span class="hljs-comment">//å…³é”®çš„ä¸åŒç‚¹</span><br>            queue.<span class="hljs-title function_ invoke__">push_back</span>(&amp;*l);<br>        &#125;<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-variable">Some</span>(<span class="hljs-keyword">ref</span> r) = n.right &#123;<br>            queue.<span class="hljs-title function_ invoke__">push_back</span>(&amp;*r);<br>        &#125;<br>    &#125;<br>    result<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="è§£å†³é—®é¢˜"><a href="#è§£å†³é—®é¢˜" class="headerlink" title="è§£å†³é—®é¢˜"></a>è§£å†³é—®é¢˜</h4><p>ç”±äºå¹³æ—¶å¸¸ç”¨çš„<code>IdentifierPattern</code>å¤šæ˜¯ <code>mut</code>,è€Œè¿™é‡Œå‡ºç°äº† <code>ref</code>ï¼Œè™½ç„¶ä»å­—é¢ä¸Šæˆ–è€…ä»£ç ä¸Šæˆ‘ä»¬å¯ä»¥ç†è§£ <code>ref</code> çš„ä½œç”¨ï¼Œä½†æ˜¯æˆ‘è¿˜æ˜¯æƒ³è¦æ‰¾å‡ºä½¿ç”¨è¿™ä¸ª pattern çš„æ¡ä»¶ã€‚ </p><p>å®˜æ–‡é“¾æ¥ï¼š<a href="https://doc.rust-lang.org/reference/patterns.html#identifier-patterns">https://doc.rust-lang.org/reference/patterns.html#identifier-patterns</a> ã€‚</p><p>å®˜æ–‡ä¸­æ˜ç¡®æŒ‡å‡ºäº†ï¼Œæ ‡è¯†ç¬¦çš„patterné»˜è®¤çš„ä¸¤ç§åšæ³•</p><p>1.ä¼šä¼˜å…ˆè€ƒè™‘æŠŠæ ‡è¯†ç¬¦æ‰€è¡¨ç¤ºçš„å˜é‡ç»‘å®šåˆ°å®ƒæ‰€ä¾èµ–çš„å€¼çš„ä¸€ä»½copyä¸Šã€‚</p><p>2.ä¼šä¼˜å…ˆè€ƒè™‘æŠŠä¾èµ–æ•°æ®moveåˆ°å˜é‡ä¸­</p><p>å…³äºcopyï¼Œå½“ç„¶å°±æ˜¯å®ç° Rustçš„ <code>Copy Trait</code>å’¯ã€‚</p><p>å…³äºmoveï¼Œè¿™é‡Œè´´å‡ºå®˜æ–‡çš„é“¾æ¥ï¼š<a href="https://doc.rust-lang.org/reference/expressions.html?highlight=move#moved-and-copied-types">https://doc.rust-lang.org/reference/expressions.html?highlight=move#moved-and-copied-types</a> ï¼Œè¿™é‡Œé¢æå‡ºäº†èƒ½å¤Ÿmoveçš„å››ç§æƒ…å†µã€‚åœ¨è¿™é‡Œæˆ‘è®¤ä¸ºä¸èƒ½è¿›è¡Œmoveçš„ä¸»è¦åŸå› æ˜¯ç¬¬ä¸€ç§æƒ…å†µ</p><blockquote><p><a href="https://doc.rust-lang.org/reference/variables.html">Variables</a> which are not currently borrowed.</p></blockquote><p>è¿™é‡Œæ‘˜å‡ºå…³é”®çš„ä¸åŒç‚¹è¿›è¡Œæ‹†åˆ†</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-variable">Some</span>(<span class="hljs-keyword">ref</span> l) = n.left &#123; <br>    queue.<span class="hljs-title function_ invoke__">push_back</span>(&amp;*l);<br>&#125;<br></code></pre></td></tr></table></figure><p>å¦‚æœæ²¡æœ‰ <code>ref</code>ï¼Œä»£ç ä¼šä»¥ä»¥ä¸‹æ–¹å¼å‘ˆç°ï¼Œå½“rustçš„ç¼–è¯‘å™¨è¿›è¡Œcheckeræ—¶ä¼šå‘ç°æˆ‘ä»¬çš„NodeèŠ‚ç‚¹æ²¡æœ‰Copyçš„å®ç°ï¼ŒåŒæ—¶åœ¨<code>Some(l) = n.left</code>è¿™ä¸ª<code>destructuring subpatterns</code>ä¸­å‘ç°lä¾èµ–çš„æ•°æ®æ˜¯<code>Box&lt;Node&gt;</code> å…³äº<code>Box</code>å®ƒç›¸å½“äºæ˜¯ä¸€ç§å…±äº«å‹çš„èƒ½åŠ›ï¼Œå› æ­¤ä¹Ÿå¹¶ä¸æ»¡è¶³<code>move</code>è§¦å‘çš„æ¡ä»¶ã€‚</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-variable">Some</span>(l) = n.left &#123; <br>    queue.<span class="hljs-title function_ invoke__">push_back</span>(&amp;*l);<br>&#125;<br></code></pre></td></tr></table></figure><p>ä½†æ˜¯æœ‰äº†ä¸Šé¢çš„<code>ref</code>æˆ‘ä»¬ä¼šæ”¹å˜ identifier pattern çš„é»˜è®¤ç»‘å®šæ–¹å¼ï¼Œç›¸å½“äºé‡‡ç”¨äº†ä¸‹é¢çš„åšæ³•</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-variable">Some</span>(l) = &amp;n.left &#123; <br>    queue.<span class="hljs-title function_ invoke__">push_back</span>(&amp;*l);<br>&#125;<br></code></pre></td></tr></table></figure><p>å¦å¤–ï¼Œæˆ‘åœ¨è¿™ä¸ªå­¦ä¹ çš„è¿‡ç¨‹ä¸­è¿˜å‘ç°äº†ä¸€ä¸ªæœ‰è¶£çš„é—®é¢˜ï¼Œå°±æ˜¯rustçš„è‡ªåŠ¨ç±»å‹æ¨æµ‹ç³»ç»Ÿä¸å®é™…éœ€è¦æ•ˆæœçš„å·®å¼‚ã€‚</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">queue</span>: VecDeque&lt;&amp;Node&gt; = VecDeque::<span class="hljs-title function_ invoke__">from</span>([root]); <span class="hljs-comment">//è¿™é‡Œæ˜¯æ˜¾ç¤ºç±»å‹</span><br></code></pre></td></tr></table></figure><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">childrens</span> = VecDeque::<span class="hljs-title function_ invoke__">new</span>(); <span class="hljs-comment">//è¿™é‡Œä¼šinferå‡º VecDeque&lt;&amp;Box&lt;Node&gt;&gt;,ä¸å®é™…éœ€æ±‚ç•¥æœ‰å·®å¼‚</span><br>...<br>childrens.<span class="hljs-title function_ invoke__">push_back</span>(&amp;*n);<br>...<br></code></pre></td></tr></table></figure><p>æ¬¢è¿å„ä½å‰æ¥æŒ‡ç‚¹ï¼Œè¿™æ˜¯æˆ‘çš„SO Question: <a href="https://stackoverflow.com/questions/73824648/rust-why-compiler-infers-a-different-type-beyond-our-expection">https://stackoverflow.com/questions/73824648/rust-why-compiler-infers-a-different-type-beyond-our-expection</a></p>]]></content>
    
    
    <categories>
      
      <category>rust</category>
      
    </categories>
    
    
    <tags>
      
      <tag>newbie</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ä¸€æ–‡å…¥é—¨rust iterator</title>
    <link href="/2022/09/21/rust-iter/"/>
    <url>/2022/09/21/rust-iter/</url>
    
    <content type="html"><![CDATA[<h1 id="ä¸€æ–‡å…¥é—¨rust-iterator"><a href="#ä¸€æ–‡å…¥é—¨rust-iterator" class="headerlink" title="ä¸€æ–‡å…¥é—¨rust iterator"></a>ä¸€æ–‡å…¥é—¨rust iterator</h1><h2 id="1-æœ¬æ–‡ç”±æ¥"><a href="#1-æœ¬æ–‡ç”±æ¥" class="headerlink" title="1.æœ¬æ–‡ç”±æ¥"></a>1.æœ¬æ–‡ç”±æ¥</h2><p>ç§‰æ‰¿ä¸€è´¯çš„åšæ³•ï¼Œæˆ‘è¿˜æ˜¯æƒ³è¯´è¯´ä¸ºä»€ä¹ˆæˆ‘ä¼šæƒ³è¦å†™ä¸‹è¿™ç¯‡æ–‡ç« ã€‚èµ·å› æ˜¯è¿™æ ·çš„ï¼Œä½œä¸ºä¸€ååˆšæƒ³rustçš„æ–°æ‰‹ï¼Œæˆ‘æ‰¾åˆ°äº†ä¸€ä¸ªé”»ç‚¼rustè¯­æ³•æ¯”è¾ƒå¥½çš„å¹³å°<code>codewars</code>ï¼Œå½“ç„¶æˆ‘åœ¨ä¹‹å‰å°±å·²ç»é˜…è¯»äº†rustæœ€ä¼˜è´¨çš„æ–‡ç« èµ„æºï¼š<a href="https://doc.rust-lang.org/book/ch01-00-getting-started.html">https://doc.rust-lang.org/book/ch01-00-getting-started.html</a> ï¼Œä»¥åŠä½¿ç”¨è¿‡<code>rustlings</code>è¿›è¡Œäº†ä¸€äº›çš„çŸ¥è¯†ç‚¹æ£€æŸ¥ã€‚åœ¨é”»ç‚¼çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘å‘ç°é‚£äº›ç®€çŸ­è€Œä¼˜é›…çš„ä»£ç ä¸ä»…ä»…æ˜¯é€»è¾‘è¿ç”¨æ›´åŠ ç†Ÿç»ƒï¼ŒåŒæ—¶ä»–ä»¬å¯¹äºæ ‡å‡†åº“çš„æŒæ¡ä¸ç†Ÿæ‚‰ç¨‹åº¦ä¹Ÿæ˜¯éå¸¸å¾—é«˜ã€‚</p><h2 id="2-ä¸€ä¸ªç®€å•çš„å…¥é—¨çº§rust-iterator"><a href="#2-ä¸€ä¸ªç®€å•çš„å…¥é—¨çº§rust-iterator" class="headerlink" title="2.ä¸€ä¸ªç®€å•çš„å…¥é—¨çº§rust iterator"></a>2.ä¸€ä¸ªç®€å•çš„å…¥é—¨çº§rust iterator</h2><h4 id="1-è®©æˆ‘ä»¬è‡ªå·±è¿›è¡Œä¾¿åˆ©æ“ä½œæˆ‘ä»¬ä¼šæ€ä¹ˆåšï¼Ÿ"><a href="#1-è®©æˆ‘ä»¬è‡ªå·±è¿›è¡Œä¾¿åˆ©æ“ä½œæˆ‘ä»¬ä¼šæ€ä¹ˆåšï¼Ÿ" class="headerlink" title="1.è®©æˆ‘ä»¬è‡ªå·±è¿›è¡Œä¾¿åˆ©æ“ä½œæˆ‘ä»¬ä¼šæ€ä¹ˆåšï¼Ÿ"></a>1.è®©æˆ‘ä»¬è‡ªå·±è¿›è¡Œä¾¿åˆ©æ“ä½œæˆ‘ä»¬ä¼šæ€ä¹ˆåšï¼Ÿ</h4><p>å‡è®¾æˆ‘ä»¬æœ‰ä»¥ä¸‹è¿™æ ·çš„ç»“æ„ï¼Œæˆ‘ä»¬å¦‚æœè¦éå†å¹¶å¯¹æ¯ä¸ªå…ƒç´ è¿›è¡Œç›¸åº”çš„æ“ä½œæ—¶åº”è¯¥æ€ä¹ˆåšï¼Ÿ</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Bag</span>&lt;T&gt; &#123;<br>    elms: <span class="hljs-type">Vec</span>&lt;T&gt;,<br>&#125;<br><span class="hljs-comment">/**</span><br><span class="hljs-comment">struct Bag&lt;T&gt; (Vec&lt;T&gt;) è¿™ç§ç»“æ„ä¹Ÿå¯ä»¥ï¼Œä¸»è¦æ˜¯ä¸ºäº†ä¸ç›´æ¥ä½¿ç”¨Vecï¼Œåªä½¿ç”¨ä»–çš„è£…è½½åŠŸèƒ½</span><br><span class="hljs-comment">*/</span><br></code></pre></td></tr></table></figure><h4 id="2-å¤§éƒ¨åˆ†äººå¯èƒ½çš„åšæ³•"><a href="#2-å¤§éƒ¨åˆ†äººå¯èƒ½çš„åšæ³•" class="headerlink" title="2.å¤§éƒ¨åˆ†äººå¯èƒ½çš„åšæ³•"></a>2.å¤§éƒ¨åˆ†äººå¯èƒ½çš„åšæ³•</h4><p>å¦‚æœè®©æˆ‘ä»¬è‡ªå·±æ¥è¿›è¡Œå®ç°ï¼Œæˆ‘ä»¬è®¤ä¸ºå¯¹äºä¸€ä¸ªæ–°æ‰‹æ¥è¯´æœ€å®¹æ˜“æƒ³åˆ°çš„å°±æ˜¯ï¼Œå®ç°å¯ä»¥ä¼ å…¥é—­åŒ…çš„â€œæ–¹æ³•â€ã€‚</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">traverse</span>&lt;F&gt;(&amp;<span class="hljs-keyword">self</span>, f: F)<br>    <span class="hljs-keyword">where</span><br>        F: <span class="hljs-title function_ invoke__">Fn</span>(T, <span class="hljs-type">usize</span>) <span class="hljs-punctuation">-&gt;</span> (),<br>    &#123;<br>        <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..<span class="hljs-keyword">self</span>.elms.<span class="hljs-title function_ invoke__">len</span>() &#123;<br>            <span class="hljs-title function_ invoke__">f</span>(<span class="hljs-keyword">self</span>.elms.<span class="hljs-title function_ invoke__">get</span>(i).<span class="hljs-title function_ invoke__">unwrap</span>().<span class="hljs-title function_ invoke__">clone</span>(), i);<br>        &#125;<br>    &#125;<br></code></pre></td></tr></table></figure><h4 id="3-é—®é¢˜åˆ†æ"><a href="#3-é—®é¢˜åˆ†æ" class="headerlink" title="3.é—®é¢˜åˆ†æ"></a>3.é—®é¢˜åˆ†æ</h4><p>ä»¥ä¸Šåšæ³•æ²¡æœ‰é—®é¢˜ï¼Œå¹¶ä¸”èƒ½å¤Ÿå®ç°ç‰¹åˆ«å¤šçš„éœ€æ±‚ä½†æ˜¯ä¸Šé¢çš„åšæ³•åœ¨ä¸è¿ç»­çš„éå†ä¸­å°±æ˜¾å¾—åˆ«ä¸æ˜¯é‚£ä¹ˆå¾—çµæ´»ã€‚å¦‚æœæƒ³è¦ä¸€ç§å¯ä»¥å®Œå…¨æ§åˆ¶å…¶éå†è¿›åº¦å¹¶ä¸”å……åˆ†çµæ´»çš„æ–¹æ¡ˆå°±éœ€è¦è¿­ä»£å™¨çš„åŠ å…¥ã€‚</p><p>è·Ÿéšç€å®˜ç½‘å¯¹äºè¿­ä»£å™¨çš„å®ç°ï¼Œæˆ‘åœ¨æœ€å¼€å§‹å®ç°äº†ä»¥ä¸‹ä¸€ä¸ªé”™è¯¯æ¡ˆä¾‹ã€‚</p><p><strong>æ³¨æ„ï¼š</strong>è¿™æ˜¯é”™è¯¯æ¡ˆä¾‹</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Bag</span>&lt;T&gt; &#123;<br>    elms: <span class="hljs-type">Vec</span>&lt;T&gt;,<br>    idx: <span class="hljs-type">usize</span>,<br>&#125;<br><span class="hljs-keyword">impl</span>&lt;T: <span class="hljs-built_in">Copy</span>&gt; <span class="hljs-built_in">Iterator</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Bag</span>&lt;T&gt; &#123;<br>    <span class="hljs-keyword">type</span> <span class="hljs-title class_">Item</span> = T;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">next</span>(&amp;<span class="hljs-keyword">mut</span> <span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Option</span>&lt;<span class="hljs-keyword">Self</span>::Item&gt; &#123;<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">self</span>.idx &lt; <span class="hljs-keyword">self</span>.elms.<span class="hljs-title function_ invoke__">len</span>() &#123;<br>            <span class="hljs-keyword">let</span> <span class="hljs-variable">result</span> = <span class="hljs-title function_ invoke__">Some</span>(<span class="hljs-keyword">self</span>.elms.<span class="hljs-title function_ invoke__">get</span>(<span class="hljs-keyword">self</span>.idx).<span class="hljs-title function_ invoke__">unwrap</span>().<span class="hljs-title function_ invoke__">clone</span>());<br>            <span class="hljs-keyword">self</span>.idx += <span class="hljs-number">1</span>;<br>            result<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-literal">None</span><br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªé—®é¢˜ä¸­æˆ‘ä»¬ä¼šå‘ç°ï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œè¿­ä»£ï¼Œä½†æ˜¯é—®é¢˜æ˜¯æˆ‘ä»¬çš„è¿­ä»£åªèƒ½éå†ä¸€æ¬¡ï¼Œå› ä¸º<code>idx</code>çš„ç´¢å¼•å€¼ä¼šè¶Šç•Œã€‚è¿™ä¸ªæ—¶å€™æœ‰äººä¼šè¯´åœ¨éå†åˆ°æœ€åä¸€ä¸ªçš„æ—¶å€™é‡ç½®ç´¢å¼•å€¼ï¼Œè¿™æ ·å¯è¡Œä½†æ˜¯å¦‚æœæˆ‘ä»¬åŒæ—¶éœ€è¦ä¸¤ä¸ªBagçš„è¿­ä»£å™¨å‘¢ï¼Ÿokï¼Œæœ‰äººä¼šè¯´ä¸º<code>Bag</code>æä¾›<code>Clone Trait</code>ï¼Œä½†æ˜¯è¿™æ ·çš„é—®é¢˜å°±æ˜¯ä¸å¿…è¦çš„å†…å­˜å¼€è¾Ÿã€‚</p><p>æ‰€ä»¥å¯¹äº<code>Iterator</code>ï¼Œæˆ‘ä»¬åº”è¯¥å°†ä»–çœ‹æˆæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ä¸ªä½“ï¼Œä½†åŒæ—¶ä»–åˆå¿…é¡»ä¸éœ€è¦éå†çš„å¯¹è±¡ä¿æŒä¸€å®šçš„è”ç³»ã€‚</p><h4 id="4-æœ€ç»ˆçš„ç®€å•æ–¹æ¡ˆ"><a href="#4-æœ€ç»ˆçš„ç®€å•æ–¹æ¡ˆ" class="headerlink" title="4.æœ€ç»ˆçš„ç®€å•æ–¹æ¡ˆ"></a>4.æœ€ç»ˆçš„ç®€å•æ–¹æ¡ˆ</h4><p>1.é¦–å…ˆæˆ‘ä»¬éœ€è¦ä¸€ä¸ªç‹¬ç«‹çš„éå†å™¨</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">pub</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">BagIter</span>&lt;T&gt; &#123;<br>    idx: <span class="hljs-type">usize</span>,<span class="hljs-comment">//è¿™æ˜¯ç‹¬ç«‹çš„è®¿é—®ç´¢å¼•</span><br>    elms: Rc&lt;RefCell&lt;<span class="hljs-type">Vec</span>&lt;T&gt;&gt;&gt;, <span class="hljs-comment">//è®°å½•æˆ‘ä»¬éœ€è¦éå†çš„context</span><br>&#125;<br><span class="hljs-keyword">impl</span>&lt;T&gt; BagIter&lt;T&gt; &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>(elms: Rc&lt;RefCell&lt;<span class="hljs-type">Vec</span>&lt;T&gt;&gt;&gt;) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> &#123;<br>        BagIter &#123; idx: <span class="hljs-number">0</span>, elms &#125;<br>    &#125;<br>&#125;<br><span class="hljs-keyword">impl</span>&lt;T&gt; <span class="hljs-built_in">Iterator</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">BagIter</span>&lt;T&gt;<br><span class="hljs-keyword">where</span><br>    T: <span class="hljs-built_in">Copy</span>,<br>&#123;<br>    <span class="hljs-keyword">type</span> <span class="hljs-title class_">Item</span> = T;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">next</span>(&amp;<span class="hljs-keyword">mut</span> <span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Option</span>&lt;<span class="hljs-keyword">Self</span>::Item&gt; &#123;<br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">elms</span> = <span class="hljs-keyword">self</span>.elms.<span class="hljs-title function_ invoke__">borrow</span>();<br>        <span class="hljs-keyword">match</span> <span class="hljs-keyword">self</span>.idx &lt; elms.<span class="hljs-title function_ invoke__">len</span>() &#123;<br>            <span class="hljs-literal">true</span> =&gt; <span class="hljs-keyword">match</span> elms.<span class="hljs-title function_ invoke__">get</span>(<span class="hljs-keyword">self</span>.idx) &#123;<br>                <span class="hljs-title function_ invoke__">Some</span>(&amp;x) =&gt; &#123;<br>                    <span class="hljs-keyword">self</span>.idx += <span class="hljs-number">1</span>;<br>                    <span class="hljs-title function_ invoke__">Some</span>(x)<br>                &#125;<br>                <span class="hljs-literal">None</span> =&gt; <span class="hljs-literal">None</span>,<br>            &#125;,<br>            <span class="hljs-literal">false</span> =&gt; <span class="hljs-literal">None</span>,<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>2.å®ç°ä¸€ä¸ª <code>iter</code> æ¯æ¬¡è°ƒç”¨ <code>iter()</code>ç”Ÿæˆä¸€ä¸ªæ–°çš„ç‹¬ç«‹éå†å™¨ã€‚</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">pub</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Bag</span>&lt;T&gt; &#123;<br>    elms: Rc&lt;RefCell&lt;<span class="hljs-type">Vec</span>&lt;T&gt;&gt;&gt;,<br>&#125;<br><span class="hljs-comment">//can only put things into Bag</span><br><span class="hljs-keyword">impl</span>&lt;T&gt; Bag&lt;T&gt; &#123;<br>    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">add</span>(&amp;<span class="hljs-keyword">mut</span> <span class="hljs-keyword">self</span>, item: T) &#123;<br>        <span class="hljs-keyword">self</span>.elms.<span class="hljs-title function_ invoke__">borrow_mut</span>().<span class="hljs-title function_ invoke__">push</span>(item)<br>    &#125;<br>    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>() <span class="hljs-punctuation">-&gt;</span> Bag&lt;T&gt; &#123;<br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">elms</span> = Rc::<span class="hljs-title function_ invoke__">new</span>(RefCell::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-built_in">vec!</span>[]));<br>        Bag &#123; elms: elms &#125;<br>    &#125;<br>    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">size</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">usize</span> &#123;<br>        <span class="hljs-keyword">self</span>.elms.<span class="hljs-title function_ invoke__">borrow</span>().<span class="hljs-title function_ invoke__">len</span>()<br>    &#125;<br>    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">iter</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> BagIter&lt;T&gt; &#123;<br>        BagIter::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-keyword">self</span>.elms.<span class="hljs-title function_ invoke__">clone</span>())<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="5-æ»¡è¶³ä½ çš„-for-â€¦-in-expression"><a href="#5-æ»¡è¶³ä½ çš„-for-â€¦-in-expression" class="headerlink" title="5.æ»¡è¶³ä½ çš„ for â€¦ in expression"></a>5.æ»¡è¶³ä½ çš„ for â€¦ in expression</h4><p>ä¼—æ‰€å‘¨çŸ¥åœ¨ä¸€å¥—å®Œç¾çš„ç¬¬ä¸‰æ–¹åº“æˆ–è€…æ ‡å‡†åº“ä¸‹ï¼Œrustä¸ºç¬¬ä¸‰æ–¹å¼€å‘è€…æä¾›çš„ä½“éªŒæ˜¯éå¸¸ä¼˜è¶Šçš„ï¼Œå…¶ä¸»è¦æºè‡ª<code>Trait</code>ä»¥åŠä¸€äº›éšå¼ç¼–è¯‘çš„å®ç°ã€‚</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">impl</span>&lt;T: <span class="hljs-built_in">Copy</span>&gt; <span class="hljs-built_in">IntoIterator</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Bag</span>&lt;T&gt; &#123;<br>    <span class="hljs-keyword">type</span> <span class="hljs-title class_">Item</span> = T;<br>    <span class="hljs-keyword">type</span> <span class="hljs-title class_">IntoIter</span> = BagIter&lt;T&gt;;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">into_iter</span>(<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span>::IntoIter &#123;<br>        <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">iter</span>()<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨<code>IntoIterator</code>å¯ä»¥è®©ä½ çš„ä»£ç åœ¨ç¼–è¯‘æ—¶ç”Ÿæˆå¯¹äºself.iter()çš„è¿­ä»£å™¨ã€‚å¦å¤–æ ¹æ®<code>IntoIterator for &amp;mut Bag&lt;T&gt;</code>, <code>IntoIterator for &amp; Bag&lt;T&gt;</code>çš„ä¸åŒä¹Ÿå¯ä»¥å®ç°ä¸åŒçš„å€Ÿç”¨ã€ä¿®æ”¹è¿­ä»£å™¨ï¼Œå½“ç„¶å’¯ï¼Œè¿™ä¸ªéƒ½æ˜¯å¾—é‡å†™ä¸€ä»½é€»è¾‘çš„ã€‚</p><p>okï¼Œå¸Œæœ›è¿™ç¯‡å…¥é—¨èƒ½å¤Ÿå¸®ä½ å»ºç«‹å¦‚ä½•ç¼–å†™è¿­ä»£å™¨çš„è®¤çŸ¥ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>rust</category>
      
    </categories>
    
    
    <tags>
      
      <tag>newbie</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å›¾ç‰‡åƒç´ åŒ–</title>
    <link href="/2022/09/14/pixel-image/"/>
    <url>/2022/09/14/pixel-image/</url>
    
    <content type="html"><![CDATA[<h1 id="åƒç´ åŒ–ä¸€å¼ å›¾ç‰‡"><a href="#åƒç´ åŒ–ä¸€å¼ å›¾ç‰‡" class="headerlink" title="åƒç´ åŒ–ä¸€å¼ å›¾ç‰‡"></a>åƒç´ åŒ–ä¸€å¼ å›¾ç‰‡</h1><h2 id="1-ä¸ºä»€ä¹ˆæˆ‘ä¼šæƒ³è¦ä¸€ç§åƒç´ é£æ ¼çš„å›¾ç‰‡"><a href="#1-ä¸ºä»€ä¹ˆæˆ‘ä¼šæƒ³è¦ä¸€ç§åƒç´ é£æ ¼çš„å›¾ç‰‡" class="headerlink" title="1.ä¸ºä»€ä¹ˆæˆ‘ä¼šæƒ³è¦ä¸€ç§åƒç´ é£æ ¼çš„å›¾ç‰‡"></a>1.ä¸ºä»€ä¹ˆæˆ‘ä¼šæƒ³è¦ä¸€ç§åƒç´ é£æ ¼çš„å›¾ç‰‡</h2><p>å› ä¸ºæˆ‘å‰æ®µæ—¶é—´æƒ³è¦DIYä¸€ä¸ªä¾¿æºçš„æ˜¾ç¤ºå™¨ï¼Œç›´æ¥ä¸€ä¸ªé¢æ¿+é©±åŠ¨çš„æ–¹æ¡ˆçœ‹ä¸Šå»ä¸ä½†é€ å‹ä¸è¡Œï¼Œè€Œä¸”ä¸æ˜“æºå¸¦ã€‚äºæ˜¯æˆ‘å°±åœ¨ç½‘ä¸Šæœç´¢ï¼Œæˆ‘å‘ç°äº†å¯è‡ªå®šä¹‰åŒ–ç¨‹åº¦æœ€é«˜çš„å°±æ˜¯é¢æ¿+é©±åŠ¨+å¾®ç§¯æœ¨æ–¹æ¡ˆäº†ï¼Œä½†æ˜¯è‡ªå®šä¹‰çš„åƒç´ é£æ ¼å›¾ç‰‡å»å“ªæ‰¾å‘¢ï¼Œäºæ˜¯æˆ‘å°±æƒ³è¦ä¸€ä¸ªè¿™æ ·çš„æ•ˆæœã€‚</p><h2 id="2-å¦‚ä½•å®ç°"><a href="#2-å¦‚ä½•å®ç°" class="headerlink" title="2.å¦‚ä½•å®ç°"></a>2.å¦‚ä½•å®ç°</h2><p>è¿™è¾¹æˆ‘é‡‡ç”¨çš„æ˜¯åœ¨æµè§ˆå™¨è¿™ä¸ªå¹³å°è¿›è¡Œæ“ä½œï¼Œä¸€ä¸ªåŸå› æ˜¯ä½¿ç”¨å…¶ä»–è¯­è¨€æˆ‘éœ€è¦å»å­¦ä¹ å¯¹åº”çš„åº“ï¼Œç¬¬äºŒä¸ªå°±æ˜¯åœ¨æµè§ˆå™¨è¿™ä¸ªå¹³å°ä¸Šæˆ‘èƒ½å¤Ÿæ›´å¿«åœ°å¾—åˆ°åé¦ˆã€‚</p><h4 id="1-å…³äºå±å¹•ä¸Šçš„åƒç´ ç‚¹"><a href="#1-å…³äºå±å¹•ä¸Šçš„åƒç´ ç‚¹" class="headerlink" title="1.å…³äºå±å¹•ä¸Šçš„åƒç´ ç‚¹"></a>1.å…³äºå±å¹•ä¸Šçš„åƒç´ ç‚¹</h4><p>é€šè¿‡åˆ†è¾¨ç‡çš„è®¾å®šï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å±å¹•ä¸Šåˆ’åˆ†å‡ºä¸åŒçš„è¡Œã€åˆ—å¯æ˜¾ç¤ºçš„åƒç´ æ•°ï¼Œæ¯”å¦‚åŒæ ·çš„<code>300 * 300</code></p><p>åƒç´ çš„å›¾ç‰‡åœ¨ï¼Œ<code>2560 * 1440</code> å’Œ <code>1920 * 1080</code>çš„åˆ†è¾¨ç‡ä¸‹é»˜è®¤çš„æ˜¾ç¤ºå¤§å°æ˜¯ä¸åŒï¼Œè¿™ç§æ—¶å€™å±å¹•ä¸€æ ¼çš„åƒç´ å¤§å°å°±äº§ç”Ÿäº†å·®å¼‚ã€‚</p><h4 id="2-æ›¾ç»ä¸ç°åœ¨"><a href="#2-æ›¾ç»ä¸ç°åœ¨" class="headerlink" title="2.æ›¾ç»ä¸ç°åœ¨"></a>2.æ›¾ç»ä¸ç°åœ¨</h4><p>ç°åœ¨çš„å±å¹•å¾€å¾€åœ¨æœ€ä½çš„åˆ†è¾¨ç‡ä¸‹ï¼Œå±å¹•åˆ’åˆ†å¥½çš„ä¸€ä¸ªåƒç´ ç‚¹ä¹Ÿæ¯”ä»¥å‰çš„å±å¹•è¦å°äº†ä¸çŸ¥é“å¤šå°‘å€ï¼Œç›®å‰æˆ‘ä»¬å¯ä»¥å‡è®¾ï¼šä¸€ä¸ªæ›¾ç»çš„åƒç´ ç‚¹ &#x3D; ä¸€ä¸ªç°åœ¨çš„åƒç´ ç‚¹ * 9 * 9ã€‚</p><h4 id="3-å±å¹•å±•ç¤ºåƒç´ æ•°é‡å¤šçš„å¥½å¤„"><a href="#3-å±å¹•å±•ç¤ºåƒç´ æ•°é‡å¤šçš„å¥½å¤„" class="headerlink" title="3.å±å¹•å±•ç¤ºåƒç´ æ•°é‡å¤šçš„å¥½å¤„"></a>3.å±å¹•å±•ç¤ºåƒç´ æ•°é‡å¤šçš„å¥½å¤„</h4><p>æ˜¾è€Œæ˜“è§ï¼Œåƒç´ æ•°å°±æ˜¯ä¸€ä¸ªåŒºåŸŸè‰²å½©å±•ç¤ºçš„å±‚åº¦ï¼Œæ›´å¤šçš„åƒç´ æ•°å¯ä»¥ä½“ç°å‡ºæ›´åŠ ç»†èŠ‚çš„å¤„ç†ã€‚å› ä¸ºåƒç´ æ˜¯æ–¹æ ¼çš„ï¼Œè¶Šå°çš„åƒç´ ç‚¹å¯ä»¥æ˜¯çš„æ–¹æ ¼ä¸æ–¹æ ¼ä¹‹é—´è¿‡æ¸¡æ›´åŠ çš„å¹³æ»‘ã€‚æ•´ä½“çš„ç»†èŠ‚å¤„ç†å°±æ›´åŠ ä¼˜ç§€ã€‚</p><h4 id="4-å…³äºæˆ‘ä»¬ä½¿ç”¨æ“ä½œç³»ç»Ÿæ”¾å¤§å›¾ç‰‡"><a href="#4-å…³äºæˆ‘ä»¬ä½¿ç”¨æ“ä½œç³»ç»Ÿæ”¾å¤§å›¾ç‰‡" class="headerlink" title="4.å…³äºæˆ‘ä»¬ä½¿ç”¨æ“ä½œç³»ç»Ÿæ”¾å¤§å›¾ç‰‡"></a>4.å…³äºæˆ‘ä»¬ä½¿ç”¨æ“ä½œç³»ç»Ÿæ”¾å¤§å›¾ç‰‡</h4><p>å…³äºè¿™ä¸€ç‚¹ï¼Œæˆ‘çš„ç†è§£æ˜¯ï¼šæ“ä½œç³»ç»Ÿæ”¾å¤§å›¾ç‰‡çš„å¤„ç†å…¶å®æ˜¯å¯¹å›¾ç‰‡ä¸­æ¯ä¸ªå®é™…åƒç´ çš„é€»è¾‘æ‰©å¤§ï¼Œä¹Ÿå°±æ˜¯å›¾ç‰‡æºæ–‡ä»¶å…¶å®æ˜¯ä¸å˜çš„ï¼Œä½†æ˜¯æˆ‘ä»¬å†æ”¾å¤§æ—¶å…¶å®æ˜¯åœ¨ä½¿ç”¨ä¸´æ—¶çš„å›¾ç‰‡æ–‡ä»¶ï¼Œç„¶åæˆ‘ä»¬å¯¹æºæ–‡ä»¶çš„æ¯ä¸ªåƒç´ è¿›è¡Œé‡‡æ ·å¹¶è¿›è¡Œæ–°çš„æ˜ å°„ï¼Œæ¯”å¦‚åŸæ¥çš„ 1ä¸ªåƒç´ æ˜ å°„æˆ 2*2ä¸ªåƒç´ åŒºçš„é€»è¾‘åƒç´ ã€‚</p><h2 id="3-å…·ä½“å®ç°"><a href="#3-å…·ä½“å®ç°" class="headerlink" title="3.å…·ä½“å®ç°"></a>3.å…·ä½“å®ç°</h2><p>çœ‹äº†ä¸Šé¢çš„æ“ä½œï¼Œå®é™…ä¸Šæˆ‘ä»¬å°±å¯ä»¥æœ‰åˆæ­¥çš„æ–¹æ¡ˆäº†ï¼Œä¹Ÿå°±æ˜¯å¯¹å›¾ç‰‡è¿›è¡Œç¼©å°çš„é‡‡æ ·ä¸æ‰©å¤§çš„æ˜ å°„ã€‚</p><h4 id="1-ä½¿ç”¨æµè§ˆå™¨ä¸æ“ä½œç³»ç»Ÿçš„èƒ½åŠ›è¿›è¡Œæ“ä½œã€‚ï¼ˆjsç‰ˆï¼Œå­¦ä¹ é€»è¾‘ç›´æ¥è·³è¿‡ï¼‰"><a href="#1-ä½¿ç”¨æµè§ˆå™¨ä¸æ“ä½œç³»ç»Ÿçš„èƒ½åŠ›è¿›è¡Œæ“ä½œã€‚ï¼ˆjsç‰ˆï¼Œå­¦ä¹ é€»è¾‘ç›´æ¥è·³è¿‡ï¼‰" class="headerlink" title="1.ä½¿ç”¨æµè§ˆå™¨ä¸æ“ä½œç³»ç»Ÿçš„èƒ½åŠ›è¿›è¡Œæ“ä½œã€‚ï¼ˆjsç‰ˆï¼Œå­¦ä¹ é€»è¾‘ç›´æ¥è·³è¿‡ï¼‰"></a>1.ä½¿ç”¨æµè§ˆå™¨ä¸æ“ä½œç³»ç»Ÿçš„èƒ½åŠ›è¿›è¡Œæ“ä½œã€‚ï¼ˆjsç‰ˆï¼Œå­¦ä¹ é€»è¾‘ç›´æ¥è·³è¿‡ï¼‰</h4><ol><li>å°†å›¾ç‰‡ç¼©å°å¹¶ç”»åˆ°ç”»å¸ƒä¸Šã€‚</li><li>å°†ç”»å¸ƒä¸Šçš„å›¾ç‰‡ç”»åˆ°ä¸´æ—¶å›¾ç‰‡DOMä¸Šã€‚</li><li>å°†ä¸´æ—¶çš„å›¾ç‰‡DOMç”»åˆ°ä¸å›¾ç‰‡åŸæ¥å°ºå¯¸ç›¸åŒç”šè‡³æ›´å¤§çš„ç”»å¸ƒä¸Šã€‚</li></ol><p>åœ¨ä¸Šè¿°çš„æ“ä½œä¸­å›¾ç‰‡çš„é‡‡æ ·ä»¥åŠæ˜ å°„å‡ç”±æµè§ˆå™¨ä¸ºæˆ‘ä»¬å®ç°ã€‚</p><p>å…·ä½“ä»£ç ï¼šscaleä¸ºé‡‡æ ·é—´éš”æˆ–è€…è¯´ç¼©æ”¾æ¯”ä¾‹ï¼Œå½±å“é‡‡æ ·é¢‘ç‡ã€‚</p><p><img src="/2022/09/14/pixel-image/js.png" alt="image-20220914130850306"></p><h4 id="2-ä½¿ç”¨è‡ªå·±å®ç°çš„é€»è¾‘æ–¹æ¡ˆã€‚"><a href="#2-ä½¿ç”¨è‡ªå·±å®ç°çš„é€»è¾‘æ–¹æ¡ˆã€‚" class="headerlink" title="2.ä½¿ç”¨è‡ªå·±å®ç°çš„é€»è¾‘æ–¹æ¡ˆã€‚"></a>2.ä½¿ç”¨è‡ªå·±å®ç°çš„é€»è¾‘æ–¹æ¡ˆã€‚</h4><p>1.æ¯éš”å¤šå°‘è¡Œå¤šå°‘åˆ—(gap)è¿›è¡Œä¸€æ¬¡é‡‡æ ·</p><p>2.å¯¹é‡‡æ ·åçš„åƒç´ è¿›è¡Œæ˜ å°„,æ˜ å°„å¤§å°ä¸º 1åƒç´  &#x3D; <code>gap * gap</code> åƒç´ </p><p>å› ä¸ºå›¾ç‰‡çš„èµ„æºå ç”¨é‡æ¯”è¾ƒå¤§ã€‚</p><p>å…·ä½“å¯ä»¥å‚è€ƒï¼š<a href="https://github.com/sunboyZgz/pixel-image/blob/56c54ccdbc526c72a7ef607b41a1bb1f07831aff/packages/pixel-image/src/main.ts#L47">https://github.com/sunboyZgz/pixel-image/blob/56c54ccdbc526c72a7ef607b41a1bb1f07831aff/packages/pixel-image/src/main.ts#L47</a></p>]]></content>
    
    
    <categories>
      
      <category>code</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å›¾åƒ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ–°çš„åšå®¢</title>
    <link href="/2022/08/24/newblog/"/>
    <url>/2022/08/24/newblog/</url>
    
    <content type="html"><![CDATA[<h1 id="Github-Page-Custom-Domain"><a href="#Github-Page-Custom-Domain" class="headerlink" title="Github Page-Custom Domain"></a>Github Page-Custom Domain</h1><h2 id="1-åŸå› "><a href="#1-åŸå› " class="headerlink" title="1.åŸå› "></a>1.åŸå› </h2><p>ä¼—æ‰€å‘¨çŸ¥<code>github</code>æä¾›äº†ä¸€ä¸ª<code>github-page</code>çš„æœåŠ¡ï¼Œä½†æ˜¯æœ‰äº›äººå¾ˆå›°æƒ‘ä¸ºä»€ä¹ˆåªèƒ½éƒ¨ç½²ä¸€ä¸ªé¡¹ç›®ï¼Œä½†å…¶å®å¹¶ä¸æ˜¯è¿™æ ·çš„ã€‚<code>github-page</code>settingä¸­çš„<code>custom domain</code>èƒ½å¾ˆå¥½çš„åˆ©ç”¨è¿™ä¸ªæœåŠ¡ä¸ºæˆ‘ä»¬éƒ¨ç½²å¤šä¸ªé¡¹ç›®ã€‚</p><p>æœ¬è´¨ä¸Šæ˜¯åˆ©ç”¨<code>github</code>ä¸ºæ¯ä¸€ä¸ªç”¨æˆ·æä¾›çš„ä¸€ä¸ªä¸ªäººç«™ç‚¹(<code>username.github.io</code>)ï¼ˆç›¸å½“äºæä¾›äº†é™æ€æœåŠ¡å™¨å·²ç»ä¸€ä¸ªç»‘å®šçš„åŸŸåï¼‰ï¼Œè¿›è¡Œ<code>DNS</code>æ˜ å°„è¿™æ ·å°±èƒ½åœ¨å‰©ä¸‹æœåŠ¡å™¨çš„æ—¶å€™è¿›è¡Œä¸€äº›ä¸ªäººé¡¹ç›®éƒ¨ç½²ã€‚</p><h2 id="2-å…·ä½“æ“ä½œ"><a href="#2-å…·ä½“æ“ä½œ" class="headerlink" title="2.å…·ä½“æ“ä½œ"></a>2.å…·ä½“æ“ä½œ</h2><h4 id="1-é¦–å…ˆæˆ‘ä»¬éœ€è¦ä¸€ä¸ªåŸŸå"><a href="#1-é¦–å…ˆæˆ‘ä»¬éœ€è¦ä¸€ä¸ªåŸŸå" class="headerlink" title="1.é¦–å…ˆæˆ‘ä»¬éœ€è¦ä¸€ä¸ªåŸŸå"></a>1.é¦–å…ˆæˆ‘ä»¬éœ€è¦ä¸€ä¸ªåŸŸå</h4><p>å¦‚ä½•è·å–åŸŸåè‡ªè¡Œè§£å†³ï¼Œæˆ‘æ˜¯åœ¨é˜¿é‡Œæ”¶è´­çš„åŸŸåæä¾›å•†é‚£è¾¹ä¹°çš„</p><h4 id="2-è¿›è¡ŒåŸŸåè§£æï¼Œä½¿username-github-ioä¸ä½ è´­ä¹°çš„ä¸€çº§åŸŸç›¸æ˜ å°„"><a href="#2-è¿›è¡ŒåŸŸåè§£æï¼Œä½¿username-github-ioä¸ä½ è´­ä¹°çš„ä¸€çº§åŸŸç›¸æ˜ å°„" class="headerlink" title="2.è¿›è¡ŒåŸŸåè§£æï¼Œä½¿username.github.ioä¸ä½ è´­ä¹°çš„ä¸€çº§åŸŸç›¸æ˜ å°„"></a>2.è¿›è¡ŒåŸŸåè§£æï¼Œä½¿<code>username.github.io</code>ä¸ä½ è´­ä¹°çš„ä¸€çº§åŸŸç›¸æ˜ å°„</h4><p>è¿™ä¸€æ­¥æˆ‘æ˜¯åœ¨é˜¿é‡Œäº‘çš„åŸŸåè§£æé‡Œåšçš„ï¼Œå…¶ä»–æ–¹å¼å¤§åŒå°å¼‚</p><p>1.åœ¨åŸŸåè§£æé‡Œé‡‡ç”¨CNAMEçš„å½¢å¼å°†ä¸€ä¸ªå¯¹æˆ‘è‡ªå·±çš„åŸŸåï¼ˆzhugezhen.cn)å’Œ<code>sunboyzgz.github.io</code></p><p>è¿›è¡Œä¸€ä¸ªæ˜ å°„ã€‚</p><p>ä¸‹ä¸€æ­¥åœ¨<strong>setting</strong>ä¸­çš„<strong>pages</strong>è®¾ç½®ä¸­æ“ä½œ</p><p>2.åœ¨<strong>Build and deployment</strong>çš„<strong>source</strong>é€‰é¡¹ä¸‹é€‰æ‹©<strong>deploy from a branch</strong>ï¼Œç„¶åé€‰æ‹©ä½ è¦éƒ¨ç½²çš„ç›®å½•ï¼Œä¹Ÿå°±æ˜¯ä½ å¸Œæœ›å±•ç¤ºçš„<code>index.html</code>æ‰€å­˜åœ¨çš„ç›®å½•ã€‚ä¸åŒäº<code>deploy from a branch</code>githubä¹Ÿä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ª<strong>github actions</strong>çš„é€‰æ‹©ï¼Œè¿™é‡Œå°±æ˜¯åé¢è¦è®²çš„<code>github actions</code>ã€‚</p><p>3.é€‰æ‹©ä¸€ä¸ª<code>custom domain</code>è¿™é‡Œå°±æ˜¯æˆ‘ä»¬è‡ªå·±è´­ä¹°çš„åŸŸåå¡«å…¥å³å¯</p><p><strong>note</strong>!!: ä½¿ç”¨äºŒçº§åŸŸåä¸<code>custom domain</code>ç›¸äº’æ˜ å°„çš„æ–¹æ¡ˆæˆ‘ä»¬å¯ä»¥éƒ¨ç½²å¤šä¸ªé¡¹ç›®ï¼Œå¹¶ä¸”è¿™äº›é¡¹ç›®å¹¶ä¸éœ€è¦éƒ½åœ¨<code>username.github.io</code>è¿™ä¸ªä»“åº“ä¸‹, ä¸è¿‡äºŒçº§åŸŸåä¹Ÿæ˜¯ç›´æ¥æ˜ å°„åˆ°<code>username.github.io</code>è¿™ä¸ªåŸŸã€‚</p><p>è¿™é‡Œå‡è®¾æˆ‘ä»¬çš„ç”Ÿæˆçš„äºŒçº§åŸŸåæ˜¯<code>book.zhugezhen.cn</code></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-comment">//åŸŸåè§£æä¸­ CNAMEå½¢å¼ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨ipçš„å½¢å¼</span><br>zhugezhen<span class="hljs-selector-class">.cn</span> -&gt; sunboyzgz<span class="hljs-selector-class">.github</span><span class="hljs-selector-class">.io</span><br>book<span class="hljs-selector-class">.zhugezhen</span><span class="hljs-selector-class">.cn</span> -&gt; sunboyzgz<span class="hljs-selector-class">.github</span><span class="hljs-selector-class">.io</span><br><span class="hljs-comment">//setting pages CNAME</span><br>custom domain save <span class="hljs-selector-tag">a</span> zhugezhen<span class="hljs-selector-class">.cn</span><br>custom domain save <span class="hljs-selector-tag">a</span> book<span class="hljs-selector-class">.zhugezhen</span>.cn<br></code></pre></td></tr></table></figure><h1 id="Github-Actions"><a href="#Github-Actions" class="headerlink" title="Github Actions"></a>Github Actions</h1><h2 id="1-åŸå› -1"><a href="#1-åŸå› -1" class="headerlink" title="1.åŸå› "></a>1.åŸå› </h2><p>æœ¬è´¨ä¸Šï¼Œè¿™å°±æ˜¯githubä¸ºæˆ‘ä»¬æä¾›çš„ä¸€ä¸ªCI&#x2F;CDçš„èƒ½åŠ›</p><p>åœ¨<code>hexo</code>ç”Ÿæˆçš„blogé¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬è™½ç„¶å¯ä»¥åœ¨æœ¬åœ°è¿›è¡Œ<code>generate</code>ç„¶åå°†æºä»£ç åŒæ­¥åˆ°è¿œç¨‹ä»“åº“çš„ä¸€ä¸ªåˆ†æ”¯ï¼Œç„¶åå†å°†éœ€è¦å±•ç¤ºçš„æ–‡ä»¶ç›®å½•æ¨é€åˆ°å¦ä¸€ä¸ªåˆ†æ”¯ï¼Œä½†æ˜¯è¿™æ ·ä¼šåœ¨æ¯æ¬¡æ“ä½œæ—¶éœ€è¦è¿›è¡Œå¾ˆå¤šç›¸åŒçš„é‡å¤æ“ä½œã€‚è¿™é¡¹å·¥ä½œå¯ä»¥äº¤ç»™å…¶ä»–çš„å·¥å…·è¿›è¡Œæ¯”å¦‚<a href="https://github.com/marketplace/travis-ci">Travis CI</a>ï¼Œæˆ‘åªæ˜¯æŠ±ç€å­¦ä¹ çš„æ€åº¦æƒ³è¦å°è¯•ä¸€ä¸‹<code>action</code>ã€‚</p><h2 id="2-å¦‚æœä½ æ˜¯hexoå¯ä»¥çœ‹ä¸‹å»ï¼Œä¸æ˜¯è¯·è·³è¿‡ï¼Œç›´æ¥åˆ°å‚è€ƒé“¾æ¥éƒ¨åˆ†æ‰¾å¯»ç­”æ¡ˆ"><a href="#2-å¦‚æœä½ æ˜¯hexoå¯ä»¥çœ‹ä¸‹å»ï¼Œä¸æ˜¯è¯·è·³è¿‡ï¼Œç›´æ¥åˆ°å‚è€ƒé“¾æ¥éƒ¨åˆ†æ‰¾å¯»ç­”æ¡ˆ" class="headerlink" title="2.å¦‚æœä½ æ˜¯hexoå¯ä»¥çœ‹ä¸‹å»ï¼Œä¸æ˜¯è¯·è·³è¿‡ï¼Œç›´æ¥åˆ°å‚è€ƒé“¾æ¥éƒ¨åˆ†æ‰¾å¯»ç­”æ¡ˆ"></a>2.å¦‚æœä½ æ˜¯hexoå¯ä»¥çœ‹ä¸‹å»ï¼Œä¸æ˜¯è¯·è·³è¿‡ï¼Œç›´æ¥åˆ°å‚è€ƒé“¾æ¥éƒ¨åˆ†æ‰¾å¯»ç­”æ¡ˆ</h2><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">name:</span> <span class="hljs-string">deploy</span> <span class="hljs-string">blog</span> <span class="hljs-string">to</span> <span class="hljs-string">gh-pages</span>  <span class="hljs-comment">#è¿™ä¸ªæ˜¯ä¸€ä¸ªworkflow name</span><br><span class="hljs-attr">on:</span> <span class="hljs-comment">#ç›‘å¬pushçš„äº‹ä»¶</span><br>  <span class="hljs-attr">push:</span><br>    <span class="hljs-attr">branches:</span> <span class="hljs-comment">#å¯¹äºmainåˆ†æ”¯çš„pushäº‹ä»¶è¿›è¡Œç›‘å¬</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">main</span><br><span class="hljs-attr">jobs:</span> <span class="hljs-comment">#workflowä¸­çš„jobsåˆ—è¡¨ï¼Œjobsé»˜è®¤å¹¶å‘è¿›è¡Œï¼Œå¦‚éœ€ç›¸äº’ä¾èµ–å‚è€ƒ need å±æ€§çš„ä½¿ç”¨</span><br>  <span class="hljs-attr">generate-public:</span> <span class="hljs-comment">#job name</span><br>    <span class="hljs-attr">runs-on:</span> <span class="hljs-string">ubuntu-latest</span> <span class="hljs-comment">#è¿è¡Œçš„æ“ä½œç³»ç»Ÿ</span><br>    <span class="hljs-attr">steps:</span> <span class="hljs-comment">#æ“ä½œæ­¥éª¤ä¸€æ­¥ä¸€æ­¥å‘ä¸‹æ‰§è¡Œ</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/checkout@v3</span> <span class="hljs-comment">#ä½¿ç”¨checkout actionï¼Œæä¾›æ‘˜å–ä»“åº“çš„èƒ½åŠ›</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Setup</span> <span class="hljs-string">Node.js</span><br>        <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/setup-node@v3</span> <span class="hljs-comment">#ä¸€ä¸ªé…ç½®nodeç¯å¢ƒçš„action</span><br>        <span class="hljs-attr">with:</span><br>          <span class="hljs-attr">node-version:</span> <span class="hljs-number">16</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Install</span> <span class="hljs-string">packages</span><br>        <span class="hljs-attr">run:</span> <span class="hljs-string">npm</span> <span class="hljs-string">install</span> <span class="hljs-comment">#å°±åƒåœ¨æœ¬åœ°ç”¨ä½¿ç”¨å‘½ä»¤è¡Œä¸€æ ·</span><br>        <span class="hljs-comment">#è¿™é‡Œè¦è¯´ä¸€ä¸‹ï¼Œä¸€ä¸ªnameä¸‹åªèƒ½æ‹¥æœ‰ä¸€ä¸ªrunï¼Œæœ‰æ—¶å¯ä»¥åƒä»¥ä¸‹è¿™æ ·æ‰§è¡Œ</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Hexo</span> <span class="hljs-string">generate</span> <span class="hljs-string">public</span><br>        <span class="hljs-attr">run:</span> <span class="hljs-string">npx</span> <span class="hljs-string">hexo</span> <span class="hljs-string">clean</span> <span class="hljs-string">&amp;&amp;</span> <span class="hljs-string">npx</span> <span class="hljs-string">hexo</span> <span class="hljs-string">generate</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Add</span> <span class="hljs-string">CNAME</span><br>        <span class="hljs-attr">run:</span> <span class="hljs-string">echo</span> <span class="hljs-string">&#x27;zhugezhen.cn&#x27;</span> <span class="hljs-string">&gt;</span> <span class="hljs-string">./public/CNAME</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">deploy</span><br>        <span class="hljs-attr">uses:</span> <span class="hljs-string">peaceiris/actions-gh-pages@v3</span> <span class="hljs-comment">#å°†ç›®æ ‡ç›®å½•push gh-pagesåˆ†æ”¯çš„action</span><br>        <span class="hljs-attr">with:</span><br>          <span class="hljs-attr">github_token:</span> <span class="hljs-string">$&#123;&#123;</span> <span class="hljs-string">secrets.GITHUB_TOKEN</span> <span class="hljs-string">&#125;&#125;</span><br>          <span class="hljs-attr">publish_dir:</span> <span class="hljs-string">./public</span><br></code></pre></td></tr></table></figure><p>è¿™ä¸ª<code>github actions</code>çš„é…ç½®å…¶å®å°±å·²ç»ä»£æ›¿äº†<code>hexo</code>æ–‡æ¡£ä¸­<a href="https://hexo.io/zh-cn/docs/github-pages%E7%9A%84%E6%93%8D%E4%BD%9C%E8%AF%B4%E6%98%8E%E4%BA%86%E3%80%82">https://hexo.io/zh-cn/docs/github-pagesçš„æ“ä½œè¯´æ˜äº†ã€‚</a></p><h4 id="3-å‚è€ƒé“¾æ¥"><a href="#3-å‚è€ƒé“¾æ¥" class="headerlink" title="3.å‚è€ƒé“¾æ¥"></a>3.å‚è€ƒé“¾æ¥</h4><p>1.è¯·å…ˆäº†è§£github actions:<a href="https://docs.github.com/cn/actions/learn-github-actions/understanding-github-actions">https://docs.github.com/cn/actions/learn-github-actions/understanding-github-actions</a></p><p>2.å¯ä»¥çœ‹çœ‹è¿™é‡Œé¢çš„åŸºæœ¬ä½¿ç”¨ï¼š<a href="https://github.com/jaywcjlove/github-actions">https://github.com/jaywcjlove/github-actions</a></p><p>3.è¿™ä¸ªä¸é‡è¦éšä¾¿çœ‹çœ‹å°±å¥½ï¼š<a href="https://github.blog/2022-08-10-github-pages-now-uses-actions-by-default/">https://github.blog/2022-08-10-github-pages-now-uses-actions-by-default/</a></p>]]></content>
    
    
    <categories>
      
      <category>å·¥å…·</category>
      
    </categories>
    
    
    <tags>
      
      <tag>é…ç½®</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ–°çš„ç¯‡ç« </title>
    <link href="/2022/08/23/My-new-way/"/>
    <url>/2022/08/23/My-new-way/</url>
    
    <content type="html"><![CDATA[<h1 id="ä¸ºä»€ä¹ˆä¼šæœ‰è¿™ç¯‡æ–‡ç« ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆä¼šæœ‰è¿™ç¯‡æ–‡ç« ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆä¼šæœ‰è¿™ç¯‡æ–‡ç« ï¼Ÿ"></a>ä¸ºä»€ä¹ˆä¼šæœ‰è¿™ç¯‡æ–‡ç« ï¼Ÿ</h1><p>ç”±äºæœ€è¿‘cç›˜ç´§å¼ ï¼Œæˆ‘é‡è£…äº†ä¸€æ¬¡ç³»ç»ŸåŒè¿›è¡Œäº†ä¸€äº›å·å®¹é‡çš„è°ƒæ•´ï¼Œå› ä¸ºæœ€è¿‘æ²¡æœ‰æ€ä¹ˆå†™è¿‡blogåœ¨è¿›è¡Œæ ¼å¼åŒ–çš„æ—¶å€™å°†åŸæ¥æ­å»ºçš„ä¸ªäººblogç»™æ¸…é™¤äº†è€Œä¸”ä¹Ÿæ²¡æœ‰åšå¤‡ä»½ï¼Œgit pageä¸Šä¼ çš„ä¹Ÿåªæ˜¯ä¸€ä¸ªç»è¿‡å¤„ç†åçš„htmlæ–‡ä»¶ï¼Œæ‰€ä»¥æˆ‘åŸæ¥çš„blogæ–‡ä»¶éƒ½ä¸¢å¤±äº†ã€‚å› ä¸ºæˆ‘éœ€è¦è¿›è¡Œä¸€äº›ç¯å¢ƒé…ç½®ï¼Œæ‰€ä»¥å†™ä¸‹äº†è¿™ç¯‡æ–‡ç« ã€‚</p><h1 id="nodejs-npm-pnpm-é…ç½®"><a href="#nodejs-npm-pnpm-é…ç½®" class="headerlink" title="nodejs + npm + pnpm é…ç½®"></a>nodejs + npm + pnpm é…ç½®</h1><h2 id="1-windows-ä¸‹å®‰è£…nodejs"><a href="#1-windows-ä¸‹å®‰è£…nodejs" class="headerlink" title="1.windows ä¸‹å®‰è£…nodejs"></a>1.windows ä¸‹å®‰è£…nodejs</h2><p><a href="https://nodejs.org/en/">https://nodejs.org/en/</a></p><p>æŒ‰ç…§æ­¥éª¤å®‰è£…å³å¯ï¼Œæ³¨æ„ä¸€ä¸‹nodejsçš„å®‰è£…ç›®å½•å³å¯</p><h2 id="2-é…ç½®npm"><a href="#2-é…ç½®npm" class="headerlink" title="2.é…ç½®npm"></a>2.é…ç½®npm</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">npm config get prefix<br></code></pre></td></tr></table></figure><p>è¿™æ¡å‘½ä»¤å¯ä»¥ç›´æ¥è·å–ä½ çš„å…¨å±€å®‰è£…è·¯å¾„çš„å‰ç¼€,è¿™ä¸ªå‰ç¼€ä¼šç”¨äº</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">npm install <span class="hljs-literal">-g</span> xxxx<br></code></pre></td></tr></table></figure><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs powershell">npm config <span class="hljs-built_in">set</span> prefix <span class="hljs-string">&quot;D:\Program Files\nodejs\node_global&quot;</span><br><br>npm config <span class="hljs-built_in">set</span> cache <span class="hljs-string">&quot;D:\Program Files\nodejs\node_cache&quot;</span><br></code></pre></td></tr></table></figure><h4 id="ç¯å¢ƒé…ç½®"><a href="#ç¯å¢ƒé…ç½®" class="headerlink" title="ç¯å¢ƒé…ç½®"></a>ç¯å¢ƒé…ç½®</h4><ol><li></li></ol><p><code>NODE_PATH    D:\Program Files\nodejs\node_global\node_modules</code></p><p><code>NODE_PATH</code> ç”¨äºè¿›è¡Œå…¨å±€çš„æ¨¡å—æ£€ç´¢ï¼Œä¾‹å¦‚åŠ è½½npmå…¨å±€ä¸‹çš„<code>express</code>æ¨¡å—çš„æ—¶å€™</p><ol start="2"><li></li></ol><p><code>PATHD D:\Program Files\nodejs\node_global</code></p><h2 id="3-é…ç½®pnpm"><a href="#3-é…ç½®pnpm" class="headerlink" title="3.é…ç½®pnpm"></a>3.é…ç½®pnpm</h2><p>æ³¨æ„æ­¤é¡¹å¯ä»¥ä¸ç”¨é…ç½®ï¼Œåœ¨æ²¡æœ‰é…ç½®çš„æƒ…å†µä¸‹ä¼šåœ¨å½“å‰å·çš„æ ¹ç›®å½•åˆ›å»º<code>node_modules</code>è¿›è¡Œç®¡ç†ã€‚</p><p>å¦‚æœæƒ³è¦pnpmè·¨ç£ç›˜æˆ–è€…å·è¿›è¡Œç®¡ç†å¯ä»¥æŒ‰å¦‚ä¸‹è®¾ç½®</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">pnpm config <span class="hljs-built_in">set</span> store<span class="hljs-literal">-dir</span> /path/to/.pnpm<span class="hljs-literal">-store</span><br></code></pre></td></tr></table></figure><p>å‚è€ƒé“¾æ¥ï¼š<a href="https://www.pnpm.cn/configuring%E3%80%81https://www.pnpm.cn/faq#store-path-is-not-specified">https://www.pnpm.cn/configuringã€https://www.pnpm.cn/faq#store-path-is-not-specified</a></p><h4 id="4-ä¿®æ”¹installçš„é•œåƒæº"><a href="#4-ä¿®æ”¹installçš„é•œåƒæº" class="headerlink" title="4.ä¿®æ”¹installçš„é•œåƒæº"></a>4.ä¿®æ”¹installçš„é•œåƒæº</h4><p>è¿™é‡Œå°±æ˜¯æ·˜å®çš„ï¼Œè¦æ˜¯ç”¨åˆ«çš„è¯·æœç´¢å¯¹åº”uri</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">npm config <span class="hljs-built_in">set</span> registry https://registry.npmmirror.com<br></code></pre></td></tr></table></figure><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">npm config get registry<br></code></pre></td></tr></table></figure><h1 id="python-anaconda"><a href="#python-anaconda" class="headerlink" title="python anaconda"></a>python anaconda</h1><h2 id="1-å®‰è£…anaconda"><a href="#1-å®‰è£…anaconda" class="headerlink" title="1.å®‰è£…anaconda"></a>1.å®‰è£…anaconda</h2><p>å¤§é™†ç”¨æˆ·æ¨èç”¨æ¸…åçš„æºè¿›è¡Œå®‰è£…è§£å†³å®‰è£…åŒ…ä¸‹è½½è¿‡æ…¢çš„é—®é¢˜</p><p><a href="https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/">https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/</a></p><h2 id="2-è§£å†³ä¸€äº›å…¸å‹é—®é¢˜ï¼ˆå¾…è¡¥å……ï¼‰"><a href="#2-è§£å†³ä¸€äº›å…¸å‹é—®é¢˜ï¼ˆå¾…è¡¥å……ï¼‰" class="headerlink" title="2.è§£å†³ä¸€äº›å…¸å‹é—®é¢˜ï¼ˆå¾…è¡¥å……ï¼‰"></a>2.è§£å†³ä¸€äº›å…¸å‹é—®é¢˜ï¼ˆå¾…è¡¥å……ï¼‰</h2><h4 id="1-pip-is-configured-with-locations-that-require-TLS-SSL"><a href="#1-pip-is-configured-with-locations-that-require-TLS-SSL" class="headerlink" title="1.[pip is configured with locations that require TLS/SSL]"></a>1.<code>[pip is configured with locations that require TLS/SSL]</code></h4><p><a href="https://stackoverflow.com/questions/45954528/pip-is-configured-with-locations-that-require-tls-ssl-however-the-ssl-module-in">https://stackoverflow.com/questions/45954528/pip-is-configured-with-locations-that-require-tls-ssl-however-the-ssl-module-in</a></p><p>ä¸€èˆ¬æˆ‘ä»¬éƒ½ä¼šæŠŠ pythonè§£é‡Šå™¨å’Œpipçš„è·¯å¾„åŠ å…¥ç¯å¢ƒï¼Œä½†æ˜¯è¿™é‡Œæˆ‘ä»¬ä¹Ÿéœ€è¦åŠ å…¥ç¬¬ä¸‰ä¸ªè·¯å¾„åˆ°ç¯å¢ƒä¸­ã€‚ï¼ˆè¿™é‡Œéœ€è¦çš„åŸå› å¯èƒ½æ˜¯æˆ‘åœ¨ä½¿ç”¨anacondaè¿™ä¸ªå‘å‹ç‰ˆæœ¬ï¼‰</p><h2 id="3-ä¿®æ”¹local-cache"><a href="#3-ä¿®æ”¹local-cache" class="headerlink" title="3.ä¿®æ”¹local cache"></a>3.ä¿®æ”¹local cache</h2><p>ä¸‹é¢è¿™ç¯‡åšæ–‡è®²è¿°äº†ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªcache</p><p><a href="https://www.techiediaries.com/python-pip-local-cache/">https://www.techiediaries.com/python-pip-local-cache/</a></p><p>é…ç½®æ–¹æ³•:åœ¨<code>%HOME%</code>çš„<code>pip</code>ç›®å½•ä¸‹åˆ›å»º<code>pip.ini</code>ï¼ˆæ²¡æœ‰ç›®å½•å°±è‡ªå»ºä¸€ä¸ªï¼‰</p><p>æ‰¾åˆ°<code>%HOME%</code>, å¯ä»¥åœ¨æ–‡ä»¶èµ„æºç®¡ç†å™¨çš„è·¯å¾„æ è¾“å…¥<code>homepath</code></p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[global]</span><br><span class="hljs-attr">cache-dir</span> = E:/languages/anaconda3/mypip/cache<br><span class="hljs-attr">log-file</span> = E:/languages/anaconda3/mypip/pip.log<br></code></pre></td></tr></table></figure><h2 id="4-ä¿®æ”¹pipå®‰è£…æº"><a href="#4-ä¿®æ”¹pipå®‰è£…æº" class="headerlink" title="4.ä¿®æ”¹pipå®‰è£…æº"></a>4.ä¿®æ”¹pipå®‰è£…æº</h2><p><a href="https://mirrors.tuna.tsinghua.edu.cn/help/pypi/">https://mirrors.tuna.tsinghua.edu.cn/help/pypi/</a></p><h4 id="5-æ£€æŸ¥ä¸€ä¸‹é…ç½®æƒ…å†µ"><a href="#5-æ£€æŸ¥ä¸€ä¸‹é…ç½®æƒ…å†µ" class="headerlink" title="5. æ£€æŸ¥ä¸€ä¸‹é…ç½®æƒ…å†µ"></a>5. æ£€æŸ¥ä¸€ä¸‹é…ç½®æƒ…å†µ</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">pip config list<br></code></pre></td></tr></table></figure><p><img src="/2022/08/23/My-new-way/image-20220823141458429.png" alt="result image"></p><h2 id="6-2022-x2F-8-x2F-27è¡¥å……"><a href="#6-2022-x2F-8-x2F-27è¡¥å……" class="headerlink" title="6. 2022&#x2F;8&#x2F;27è¡¥å……:"></a>6. 2022&#x2F;8&#x2F;27è¡¥å……:</h2><p>error:</p><blockquote><p>solving environment: failed with intitial frozen solve.Retrying with flexible solve.</p></blockquote><p><img src="/2022/08/23/My-new-way/image-20220827185106780.png" alt="error image"></p><h4 id="æ–¹æ¡ˆä¸€ï¼šç›´é¢å›°éš¾"><a href="#æ–¹æ¡ˆä¸€ï¼šç›´é¢å›°éš¾" class="headerlink" title="æ–¹æ¡ˆä¸€ï¼šç›´é¢å›°éš¾"></a>æ–¹æ¡ˆä¸€ï¼šç›´é¢å›°éš¾</h4><p>1.ä¿®æ”¹<code>conda</code>å®‰è£…çš„é•œåƒæºä¸ºåç»­æ“ä½œæé€Ÿ</p><p>å…·ä½“ä¿®æ”¹æ–¹æ¡ˆå¯ä»¥å‚è€ƒæ¸…åæä¾›çš„æ–¹æ¡ˆ<code>.condarc</code></p><p>windowsä¸‹ä½¿ç”¨å‘½ä»¤ç”Ÿæˆåœ¨<code>%home%</code>ç›®å½•ä¸‹ç”Ÿæˆ</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">conda config <span class="hljs-literal">--set</span> show_channel_urls yes<br></code></pre></td></tr></table></figure><p>ç„¶åå°†ä¸‹æ–¹é“¾æ¥çš„ä¸­çš„é…ç½®å¤åˆ¶åˆ°<code>.condarc</code>ä¸­</p><p><a href="https://mirrors.tuna.tsinghua.edu.cn/help/anaconda/">https://mirrors.tuna.tsinghua.edu.cn/help/anaconda/</a></p><p>2. </p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">conda update <span class="hljs-literal">-all</span><br></code></pre></td></tr></table></figure><h4 id="æ–¹æ¡ˆäºŒï¼šæ›²çº¿æ•‘å›½"><a href="#æ–¹æ¡ˆäºŒï¼šæ›²çº¿æ•‘å›½" class="headerlink" title="æ–¹æ¡ˆäºŒï¼šæ›²çº¿æ•‘å›½"></a>æ–¹æ¡ˆäºŒï¼šæ›²çº¿æ•‘å›½</h4><p>ä½¿ç”¨pip install å®‰è£…ï¼Œä½†æ˜¯è¿™æ ·çš„è¯ä¸èƒ½äº«å—åˆ°conda create envå¸¦æ¥çš„å¥½å¤„ã€‚ä½†æ˜¯çœŸçš„ç®€å•ã€‚</p><h4 id="æ–¹æ¡ˆä¸‰ï¼šé™çº§condaç­–ç•¥"><a href="#æ–¹æ¡ˆä¸‰ï¼šé™çº§condaç­–ç•¥" class="headerlink" title="æ–¹æ¡ˆä¸‰ï¼šé™çº§condaç­–ç•¥"></a>æ–¹æ¡ˆä¸‰ï¼šé™çº§condaç­–ç•¥</h4><p>ç½‘ä¸Šè‡ªæœ</p><h1 id="go"><a href="#go" class="headerlink" title="go"></a>go</h1><p>è¿™ä¸ªå°±æ˜¯æœ€ä¸ºç®€å•çš„äº†</p><p>å»å®˜ç½‘æ‰¾ä¸ªå®‰è£…åŒ…è·Ÿç€å®˜ç½‘èµ°å°±å¥½äº†ï¼š<a href="https://go.dev/doc/install">https://go.dev/doc/install</a></p><p>å®‰è£…å¥½ä¹‹åæ¨èä¿®æ”¹ä¸€ä¸‹<code>GOPATH</code>å’Œ<code>GOBIN</code>,ç›®å‰ç‰ˆæœ¬<code> GO111MODULE</code>é»˜è®¤æ˜¯è®¾ä¸º<code>on</code></p><p>å°å°çš„çœ‹ä¸€ä¸‹<code>GOPATH</code>çš„ç›®å½•ç»“æ„ï¼Œä»¥åŠåŠŸèƒ½ï¼š<a href="http://c.biancheng.net/view/88.html">http://c.biancheng.net/view/88.html</a></p><h2 id="1-åœ¨ï¼ˆç”¨æˆ·ç¯å¢ƒå˜é‡ï¼‰ä¸­ä¿®æ”¹GOPATH"><a href="#1-åœ¨ï¼ˆç”¨æˆ·ç¯å¢ƒå˜é‡ï¼‰ä¸­ä¿®æ”¹GOPATH" class="headerlink" title="1.åœ¨ï¼ˆç”¨æˆ·ç¯å¢ƒå˜é‡ï¼‰ä¸­ä¿®æ”¹GOPATH"></a>1.åœ¨ï¼ˆç”¨æˆ·ç¯å¢ƒå˜é‡ï¼‰ä¸­ä¿®æ”¹GOPATH</h2><p>æŠŠå¯¹åº”çš„å˜é‡æ”¹ä¸ºä½ è‡ªå·±çš„ç›®å½•è·¯å¾„å³å¯</p><h4 id="2-GOBIN"><a href="#2-GOBIN" class="headerlink" title="2.GOBIN"></a>2.GOBIN</h4><p>è¿™ä¸ªå¯ä»¥ä¸åšï¼Œæˆ‘åšè¿™ä¸ªä¸»è¦æ˜¯è®©åæœŸ<code>install</code>çš„æ–‡ä»¶å’Œ<code>bin</code>ç›®å½•ä¸‹çš„å¼€å‘è€…å·¥å…·ç›¸éš”ç¦»</p><h4 id="3-ä¿®æ”¹GOCACHE"><a href="#3-ä¿®æ”¹GOCACHE" class="headerlink" title="3.ä¿®æ”¹GOCACHE"></a>3.ä¿®æ”¹GOCACHE</h4><p>æˆ‘ä¹Ÿæ˜¯ç®€å•åœ°ä¿®æ”¹äº†ä¸€ä¸‹<code>GOCACHE</code>,æˆ‘æ˜¯æ”¾åœ¨<code>GOPATH</code>ä¹‹ä¸‹çš„</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">go env <span class="hljs-literal">-w</span> GOCACHE=yourpath<br></code></pre></td></tr></table></figure><h2 id="4-è®¾ç½®ä»£ç†"><a href="#4-è®¾ç½®ä»£ç†" class="headerlink" title="4.è®¾ç½®ä»£ç†"></a>4.è®¾ç½®ä»£ç†</h2><p><a href="https://cloud.tencent.com/developer/article/1773630">https://cloud.tencent.com/developer/article/1773630</a></p>]]></content>
    
    
    <categories>
      
      <category>å·¥å…·</category>
      
    </categories>
    
    
    <tags>
      
      <tag>é…ç½®</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
